{
  "version": 3,
  "sources": ["../client/ui.js", "../client/contract.js", "../client/service.js", "../client/utils.js", "../client/chain.js", "../client/app.js"],
  "sourcesContent": ["\nexport function initPageBridge() {\n  $(\"#main\").hide();\n  $(\"#swapForm\").show();\n\n  $('#nbTokensToSwap').prop('disabled', false);\n  $('#recipientAddress').prop('disabled', false);\n\n  initTxSummary();\n\n  $(\"#error\").text(\"\");\n\n  $('#btnSwap').prop('disabled', true);\n  $(\"#btnSwap\").text(\"Transfer\");\n  $(\"#btnSwap\").show();\n  $(\"#btnSwapSpinner\").hide();\n  $(\"#btnSwapSpinnerText\").hide();\n\n  $(\"#infoRefund\").hide();\n\n  initProgressBar();\n}\n\nexport function initReConnectionScreen() {\n  $(\"#connectionError\").text('').hide();\n  $(\"#connectMetamaskBtn\").hide();\n  $(\"#connectMetamaskBtnSpinner\").show();\n  $(\"#swapForm\").hide();\n  $(\"#main\").show();\n}\n\nexport function displayConnectionError(error) {\n  $(\"#connectMetamaskBtnSpinner\").hide();\n  $(\"#connectMetamaskBtn\").show();\n  $(\"#connectionError\").text(error).show();\n}\n\nexport function initTransfer() {\n  initTxSummary();\n  changeBtnToTransferInProgress();\n  $(\"#steps\").hide();\n  initProgressBar();\n  $(\"#error\").text(\"\");\n\n}\n\nexport function changeBtnToTransferInProgress() {\n  $(\"#btnSwap\").hide();\n  $('#btnSwapSpinner').prop('disabled', true);\n  $(\"#btnSwapSpinner\").show();\n  $(\"#btnSwapSpinnerText\").show();\n  $(\"#workflow\").show();\n  $(\"#close\").hide();\n}\n\nfunction initTxSummary() {\n  $(\"#txSummary1Label\").text(\"\");\n  $(\"#txSummary1\").hide();\n  $(\"#txSummary2Label\").text(\"\");\n  $(\"#txSummary2\").hide();\n  $(\"#txSummary2Timer\").hide();\n  $(\"#txSummary3Label\").text(\"\");\n  $(\"#txSummary3\").hide();\n  $(\"#txSummary4Label\").text(\"\");\n  $(\"#txSummary4\").hide();\n  $(\"#txSummary5Label\").text(\"\");\n  $(\"#txSummary5\").hide();\n  $(\"#txSummary6Label\").text(\"\");\n  $(\"#txSummary6\").hide();\n  $(\"#txSummary7Label\").text(\"\");\n  $(\"#txSummary7\").hide();\n  $(\"#txSummaryFinished\").hide();\n  $(\"#txSummaryRefundFinished\").hide();\n  $(\"#txRefundTransactionLabel\").text(\"\");\n  $(\"#txRefundTransaction\").hide();\n}\n\nfunction initProgressBar() {\n\n  $(\"#ethDeploymentStep\").removeClass(\"is-active\");\n  $(\"#ethDeploymentStep\").removeClass(\"is-failed\");\n  $(\"#ethTransferStep\").removeClass(\"is-active\");\n  $(\"#ethTransferStep\").removeClass(\"is-failed\");\n  $(\"#archethicDeploymentStep\").removeClass(\"is-active\");\n  $(\"#archethicDeploymentStep\").removeClass(\"is-failed\");\n  $(\"#swapStep\").removeClass(\"is-active\");\n  $(\"#swapStep\").removeClass(\"is-failed\");\n}\n\nexport function showConfirmationDialog(title, message, callback) {\n  var dialog = $('<div></div>').html(message)\n    .dialog({\n      title: title,\n      resizable: false,\n      modal: true,\n      buttons: {\n        \"No\": function () {\n          callback(false);\n          $(this).dialog(\"close\");\n        },\n        \"Yes\": function () {\n          callback(true);\n          $(this).dialog(\"close\");\n        },\n      },\n      open: function (event, ui) {\n        $(this).css({\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-size': '12px',\n          'border': 'none',\n          'border-radius': '10px',\n          'letter-spacing': '2.56232px'\n        });\n        $('.ui-dialog').css({\n          'border-radius': '20px',\n        });\n        $('.ui-dialog-titlebar').css({\n          'background': 'transparent',\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-size': '14px',\n          'border': 'none',\n          'border-radius': '10px 10px 0 0',\n          'letter-spacing': '2.56232px'\n        });\n        $('.ui-widget-content').css({\n          'background': '#1a1a1a',\n\n        });\n        $('.ui-dialog .ui-dialog-content').css({\n          'background': 'transparent',\n        });\n        $('.ui-dialog-buttonpane .ui-widget-content .ui-helper-clearfix').css({\n          'background': 'transparent',\n        });\n        $('.ui-dialog-buttonpane').css({\n          'background': 'transparent'\n        });\n        $(this).parent().find('.ui-dialog-buttonset button:first-child').css({\n          'margin-right': '30px'\n        });\n        $(this).parent().find('.ui-dialog-buttonset button').hover(\n          function () {\n            $(this).css({\n              'color': '#b0b0b0'\n            });\n          }, function () {\n            $(this).css({\n              'color': 'white'\n            });\n          }\n        );\n        $('.ui-dialog-buttonpane button').css({\n          'background': 'transparent',\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-weight': '400',\n          'font-size': '14px',\n          'border': 'none',\n          'border-radius': '10px',\n          'letter-spacing': '2.56232px'\n        });\n      }\n    });\n}\n\n\nexport function showRefundDialog(title, message, callback) {\n  var input = $(\"<input>\").attr({\n    \"type\": \"text\",\n    \"size\": \"50\"\n  });\n  var dialog = $(\"<div>\").html(message).append(\"<br/><br/>\").append(input)\n    .dialog({\n      title: title,\n      resizable: false,\n      modal: true,\n      buttons: {\n        \"Cancel\": function () {\n          callback(false);\n          $(this).dialog(\"close\");\n        },\n        \"Validate\": function () {\n          var contractAddress = input.val();\n          if (isValidERC20Address(contractAddress)) {\n            callback(true, contractAddress);\n            $(this).dialog(\"close\");\n          } else {\n            alert(\"Please enter a valid ERC20 address\");\n          }\n        }\n      },\n      open: function (event, ui) {\n        input.css({\n          'border-radius': '10px',\n          'font-family': 'Lato',\n          'font-weight': '700',\n          'font-size': '14px',\n          'line-height': '17px',\n          'color': '#FFFFFF',\n          'border': 'none',\n          'background': '#000000',\n          'padding': '10px',\n          'letter-spacing': '2.56232px'\n        });\n        $(this).css({\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-size': '12px',\n          'border': 'none',\n          'border-radius': '10px',\n          'letter-spacing': '2.56232px'\n        });\n        $('.ui-dialog').css({\n          'width': '450px',\n          'border-radius': '20px',\n        });\n        $('.ui-dialog-titlebar').css({\n          'background': 'transparent',\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-size': '14px',\n          'border': 'none',\n          'border-radius': '10px 10px 0 0',\n          'letter-spacing': '2.56232px'\n        });\n        $('.ui-widget-content').css({\n          'background': '#1a1a1a',\n\n        });\n        $('.ui-dialog .ui-dialog-content').css({\n          'background': 'transparent',\n        });\n        $('.ui-dialog-buttonpane .ui-widget-content .ui-helper-clearfix').css({\n          'background': 'transparent',\n        });\n        $('.ui-dialog-buttonpane').css({\n          'background': 'transparent'\n        });\n        $(this).parent().find('.ui-dialog-buttonset button:first-child').css({\n          'margin-right': '30px'\n        });\n        $(this).parent().find('.ui-dialog-buttonset button').hover(\n          function () {\n            $(this).css({\n              'color': '#b0b0b0'\n            });\n          }, function () {\n            $(this).css({\n              'color': 'white'\n            });\n          }\n        );\n        $('.ui-dialog-buttonpane button').css({\n          'background': 'transparent',\n          'color': 'white',\n          'font-family': 'Lato',\n          'font-weight': '400',\n          'font-size': '14px',\n          'border': 'none',\n          'border-radius': '10px',\n          'letter-spacing': '2.56232px'\n        });\n      }\n    });\n}\n\nfunction isValidERC20Address(address) {\n  // Check if address matches ERC20 format, return true or false\n  return ethers.utils.isAddress(address);\n}\n", "\nimport { handleResponse } from \"./utils.js\";\n\nexport async function getERC20Contract(unirisTokenAddress, provider) {\n  const unirisTokenABI = await getUnirisTokenABI();\n  return new ethers.Contract(unirisTokenAddress, unirisTokenABI, provider);\n}\n\nexport async function getHTLC_Contract(HTLC_Address, provider) {\n  const { abi: HTLCABI } = await getHTLC();\n  return new ethers.Contract(HTLC_Address, HTLCABI, provider)\n}\n\nexport async function deployHTLC(\n  recipientEthereum,\n  unirisTokenAddress,\n  amount,\n  hash,\n  signer,\n  lockTime\n) {\n  const { abi: HTLCABI, bytecode: HTLCByteCode } = await getHTLC();\n  const factory = new ethers.ContractFactory(HTLCABI, HTLCByteCode, signer);\n\n  const contract = await factory.deploy(\n    recipientEthereum,\n    unirisTokenAddress,\n    ethers.utils.parseUnits(amount, 18),\n    hash,\n    lockTime,\n    { gasLimit: 1000000 }\n  );\n\n  const tx = await contract.deployTransaction.wait();\n  console.log(\"HTLC contract deployed at \" + contract.address);\n\n  return { contract: contract, transaction: tx }\n}\n\nasync function transferTokensToHTLC(\n  amount,\n  HTLCAddress,\n  unirisContract,\n  signer\n) {\n  const unirisWithSigner = unirisContract.connect(signer);\n\n  const tx = await unirisWithSigner.transfer(\n    HTLCAddress,\n    ethers.utils.parseUnits(amount, 18)\n  );\n\n  return await tx.wait()\n}\n\n\nexport async function transferERC20(state) {\n  const { HTLC_Contract, amount, unirisContract, signer, sourceChainExplorer } = state\n\n  $(\"#ethTransferStep\").addClass(\"is-active\")\n  const transferTokenTx = await transferTokensToHTLC(amount, HTLC_Contract.address, unirisContract, signer);\n  localStorage.setItem(\"transferStep\", \"transferedERC20\")\n\n  // Update the pending transfer state\n  const pendingTransferJSON = localStorage.getItem(\"pendingTransfer\")\n  let pendingTransfer = JSON.parse(pendingTransferJSON)\n  pendingTransfer.erc20transferAddress = transferTokenTx.transactionHash\n  localStorage.setItem(\"pendingTransfer\", JSON.stringify(pendingTransfer))\n\n  console.log(`${amount} UCO transfered`);\n\n  $(\"#txSummary2Label\").html(`Provision UCOs: <a href=\"${sourceChainExplorer}/tx/${transferTokenTx.transactionHash}\" target=\"_blank\">${transferTokenTx.transactionHash}</a>`)\n  $(\"#txSummary2\").show();\n  $(\"#ethTransferStep\").removeClass(\"is-active\")\n\n  state.erc20transferAddress = transferTokenTx.transactionHash\n  return state\n}\n\nexport async function deployArchethic(state) {\n  const { HTLC_Contract, amount, secretDigestHex, recipientArchethic, ethChainId, toChainExplorer, HTLC_transaction } = state\n\n  $(\"#archethicDeploymentStep\").addClass(\"is-active\");\n  step = 3;\n\n  const contractAddress = await sendDeployRequest(\n    secretDigestHex,\n    recipientArchethic,\n    amount,\n    HTLC_Contract.address,\n    HTLC_transaction.transactionHash,\n    ethChainId\n  );\n  localStorage.setItem(\"transferStep\", \"deployedArchethicContract\")\n\n  // Update the pending transfer state\n  const pendingTransferJSON = localStorage.getItem(\"pendingTransfer\")\n  let pendingTransfer = JSON.parse(pendingTransferJSON)\n  pendingTransfer.archethicContractAddress = contractAddress\n  localStorage.setItem(\"pendingTransfer\", JSON.stringify(pendingTransfer))\n\n  console.log(\"Contract address on Archethic\", contractAddress);\n  $(\"#txSummary3Label\").html(`Contract address on Archethic: <a href=\"${toChainExplorer}/${contractAddress}\" target=\"_blank\">${contractAddress}</a>`)\n  $(\"#txSummary3\").show();\n\n  $(\"#archethicDeploymentStep\").removeClass(\"is-active\");\n\n  state.archethicContractAddress = contractAddress\n  return state\n}\n\n\nexport async function withdrawEthereum(state) {\n  const { HTLC_Contract, signer, secretHex, unirisContract, UCOPrice, sourceChainExplorer } = state\n\n  const withdrawTx = await withdrawERC20Token(HTLC_Contract, signer, secretHex)\n  localStorage.setItem(\"transferStep\", \"withdrawEthContract\")\n\n  // Update the pending transfer state\n  const pendingTransferJSON = localStorage.getItem(\"pendingTransfer\")\n  let pendingTransfer = JSON.parse(pendingTransferJSON)\n  pendingTransfer.withdrawEthereumAddress = withdrawTx.transactionHash\n  localStorage.setItem(\"pendingTransfer\", JSON.stringify(pendingTransfer))\n\n  console.log(`Ethereum's withdraw transaction - ${withdrawTx.transactionHash}`);\n  $(\"#txSummary4Label\").html(`${fromChainName} swap: <a href=\"${sourceChainExplorer}/tx/${withdrawTx.transactionHash}\" target=\"_blank\">${withdrawTx.transactionHash}</a>`)\n  $(\"#txSummary4\").show();\n\n  const ethAccount = await signer.getAddress();\n  const erc20Balance = await unirisContract.balanceOf(ethAccount);\n  const erc20Amount = ethers.utils.formatUnits(erc20Balance, 18);\n  $(\"#fromBalanceUCO\").text(new Intl.NumberFormat().format(parseFloat(erc20Amount).toFixed(2)));\n  let maxSwap = 20 / UCOPrice\n  $(\"#maxUCOValue\").text(Math.min(erc20Amount / UCOPrice, maxSwap).toFixed(5));\n  $(\"#fromBalanceUSD\").text((erc20Amount * UCOPrice).toFixed(5));\n\n  state.withdrawEthereumAddress = withdrawTx.transactionHash\n  return state\n}\n\nexport async function withdrawArchethic({ archethicContractAddress, HTLC_Contract, withdrawEthereumAddress, secretHex, ethChainId, toChainExplorer }) {\n  console.log(archethicContractAddress)\n  const { archethicWithdrawTransaction, archethicTransferTransaction } = await sendWithdrawRequest(\n    archethicContractAddress,\n    HTLC_Contract.address,\n    withdrawEthereumAddress,\n    secretHex,\n    ethChainId\n  );\n  localStorage.setItem(\"transferStep\", \"withdrawArchethicContract\")\n\n  console.log(`Archethic's withdraw transaction ${archethicWithdrawTransaction}`)\n  console.log(`Archethic's transfer transaction ${archethicTransferTransaction}`)\n  $(\"#txSummary5Label\").html(`Archethic swap: <a href=\"${toChainExplorer}/${archethicWithdrawTransaction}\" target=\"_blank\">${archethicWithdrawTransaction}</a>`)\n  $(\"#txSummary5\").show();\n\n  $(\"#txSummary6Label\").html(`Archethic transfer: <a href=\"${toChainExplorer}/${archethicTransferTransaction}\" target=\"_blank\">${archethicTransferTransaction}</a>`)\n  $(\"#txSummary6\").show();\n  $(\"#txSummary2Timer\").hide();\n  $(\"#txSummaryFinished\").show();\n\n}\n\n\nasync function sendDeployRequest(\n  secretDigestHex,\n  recipientAddress,\n  amount,\n  ethereumContractAddress,\n  ethereumContractTransaction,\n  ethChainId\n) {\n  return fetch(\"/swap/deployContract\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      secretHash: secretDigestHex,\n      recipientAddress: recipientAddress,\n      amount: amount * 1e8,\n      ethereumContractAddress: ethereumContractAddress,\n      ethereumContractTransaction,\n      ethereumChainId: ethChainId,\n    }),\n  })\n    .then(handleResponse)\n    .then((r) => r.contractAddress);\n}\n\nasync function withdrawERC20Token(HTLC_Contract, signer, secret) {\n  const HTLC_ContractSigner = await HTLC_Contract.connect(signer)\n\n  try {\n    // Try to the call the contract to check its existence\n    await HTLC_ContractSigner.startTime()\n    const tx = await HTLC_ContractSigner.withdraw(`0x${secret}`, { gasLimit: 1000000 })\n    return await tx.wait()\n  }\n  catch (e) {\n    console.log(e)\n    throw e\n  }\n\n}\n\nasync function sendWithdrawRequest(\n  archethicContractAddress,\n  ethereumContractAddress,\n  ethereumWithdrawTransaction,\n  secret,\n  ethChainId\n) {\n  return fetch(\"/swap/withdraw\", {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      archethicContractAddress: archethicContractAddress,\n      ethereumContractAddress: ethereumContractAddress,\n      ethereumWithdrawTransaction: ethereumWithdrawTransaction,\n      secret: secret,\n      ethereumChainId: ethChainId,\n    }),\n  }).then(handleResponse)\n    .then(r => {\n      const { archethicWithdrawTransaction, archethicTransferTransaction } = r\n      return { archethicWithdrawTransaction, archethicTransferTransaction }\n    })\n}\n\nasync function getUnirisTokenABI() {\n  const r = await fetch(\"uco_abi.json\");\n  return await r.json();\n}\n\nasync function getHTLC() {\n  const r = await fetch(\"HTLC.json\");\n  const r_1 = await r.json();\n  return {\n    abi: r_1.abi,\n    bytecode: r_1.bytecode,\n  };\n}\n\nexport async function getHTLCLockTime(HTLC_Contract) {\n  const startTime = await HTLC_Contract.startTime()\n  const lockTime = await HTLC_Contract.lockTime()\n  const timestampInSec = startTime.toNumber() + lockTime.toNumber()\n  return new Date(timestampInSec * 1000)\n}\n\nexport async function refundERC(HTLC_Contract, signer) {\n  const HTLC_ContractSigner = await HTLC_Contract.connect(signer)\n  const isFinished = await HTLC_ContractSigner.finished()\n  if (isFinished) {\n    throw \"Swap is already closed due to a withdraw or a prior refund.\"\n  }\n\n  const tx = await HTLC_ContractSigner.refund()\n  return await tx.wait()\n}\n", "import { handleResponse } from \"./utils.js\";\n\nexport async function getArchethicBalance(address) {\n    return fetch(`/balances/archethic/${address}`)\n        .then(handleResponse)\n        .then((r) => {\n            return r.balance\n        });\n}\n\nexport async function getConfig(ethChainId) {\n\n    return fetch(\"/status\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\",\n        },\n        body: JSON.stringify({\n            ethereumChainId: ethChainId,\n        }),\n    })\n        .then(handleResponse)\n        .then((r) => {\n            if (r.status != \"ok\") {\n                throw r.status;\n            }\n\n            return {\n                archethicEndpoint: r.archethicEndpoint,\n                unirisTokenAddress: r.unirisTokenAddress,\n                recipientEthereum: r.recipientEthereum,\n                sufficientFunds: r.sufficientFunds,\n                UCOPrice: r.UCOPrice,\n                sourceChainExplorer: r.sourceChainExplorer,\n                bridgeAddress: r.bridgeAddress,\n                maxSwapDollar: r.maxSwapDollar\n            };\n        });\n}\n", "import { getHTLCLockTime, refundERC, getHTLC_Contract } from \"./contract\"\nimport { getConfig } from \"./service.js\";\n\nexport async function handleResponse(response) {\n  return new Promise(function (resolve, reject) {\n    if (response.status >= 200 && response.status <= 299) {\n      response.json().then(resolve);\n    } else {\n      response\n        .json()\n        .then(reject)\n        .catch(() => reject(response.statusText));\n    }\n  });\n}\n\nconst byteToHex = [];\nfor (let n = 0; n <= 0xff; ++n) {\n  const hexOctet = n.toString(16).padStart(2, \"0\");\n  byteToHex.push(hexOctet);\n}\n\nexport function uint8ArrayToHex(bytes) {\n  const buff = new Uint8Array(bytes);\n  const hexOctets = new Array(buff.length);\n\n  for (let i = 0; i < buff.length; ++i) {\n    hexOctets[i] = byteToHex[buff[i]];\n  }\n\n  return hexOctets.join(\"\");\n}\n\n\nexport async function handleError(e, step, state, ethChainId) {\n  $('#btnSwap').prop('disabled', false);\n  $('#nbTokensToSwap').prop('disabled', false);\n  $('#recipientAddress').prop('disabled', false);\n  $(\"#btnSwap\").show();\n  $(\"#btnSwapSpinner\").hide();\n\n  console.log(e)\n  let errorMsg = e\n  if (e.data && e.data.message) {\n    errorMsg = e.data.message\n  }\n  else if (e.message) {\n    errorMsg = e.message\n  }\n\n  console.error(errorMsg);\n  $(\"#error\")\n    .text(`${errorMsg}`)\n    .show();\n  $(\"#close\").show();\n\n  switch (step) {\n    case 1:\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\");\n      $(\"#ethTransferStep\").removeClass(\"is-active\")\n      $(\"#ethTransferStep\").addClass(\"is-failed\");\n      $(\"#archethicDeploymentStep\").addClass(\"is-failed\");\n      $(\"#swapStep\").addClass(\"is-failed\");\n      break;\n    case 2:\n      $(\"#ethTransferStep\").addClass(\"is-failed\");\n      $(\"#ethTransferStep\").removeClass(\"is-active\");\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\")\n      break;\n    case 3:\n      $(\"#archethicDeploymentStep\").addClass(\"is-failed\");\n      $(\"#archethicDeploymentStep\").removeClass(\"is-active\");\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\")\n      $(\"#ethTransferStep\").removeClass(\"is-active is-failed\")\n      break;\n    case 4:\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\")\n      $(\"#ethTransferStep\").removeClass(\"is-active is-failed\")\n      $(\"#archethicDeploymentStep\").removeClass(\"is-active is-failed\");\n      $(\"#swapStep\").addClass(\"is-failed\");\n      $(\"#swapStep\").removeClass(\"is-active\");\n      break;\n    default:\n      break;\n  }\n\n  console.log(state)\n  if (state && state.erc20transferAddress) {\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n    const signer = provider.getSigner();\n\n    const HTLC_Contract = await getHTLC_Contract(state.HTLC_Address, provider)\n    const endDate = await getHTLCLockTime(HTLC_Contract)\n    updateClock(endDate, HTLC_Contract, signer, state, ethChainId);\n    $(\"#txSummary2Timer\").show();\n  }\n}\n\nexport function getTimeRemaining(endtime) {\n  var t = Date.parse(endtime) - Date.parse(new Date());\n  var seconds = Math.floor((t / 1000) % 60);\n  var minutes = Math.floor((t / 1000 / 60) % 60);\n  var hours = Math.floor((t / (1000 * 60 * 60)) % 24);\n  return {\n    'total': t,\n    'hours': hours,\n    'minutes': minutes,\n    'seconds': seconds\n  };\n}\n\nexport function updateClock(endtime, HTLC_Contract, signer, state, ethChainId) {\n  let timeinterval = setInterval(function () {\n    var t = getTimeRemaining(endtime);\n    if (t.total <= 0) {\n      clearInterval(timeinterval);\n      $(\"#txSummary2Timer\").html(`\n        <img src=\"assets/images/icons/timer.png\" height=\"20\" alt=\"\" style=\"padding-right: 5px; padding-bottom: 5px;\" />\n        As the transfer is not effective, you can retrieve your funds by clicking on the following button (fees not included).\n        <button id=\"refundButton\">REFUND</button>\n        <button id=\"refundButtonSpinner\" disabled style=\"display: none;\">\n\t\t\t\t\t\t<span>REFUND</span>\n\t\t\t\t\t\t<span class=\"spinner-border spinner-border-sm\" style=\"width: 8px; height: 8px; padding-bottom: 5px;\" role=\"status\" aria-hidden=\"true\"></span>\n\t\t\t\t</button>\n        <img src=\"assets/images/icons/help.png\" height=\"20\" alt=\"\" style=\"padding-top: 3px; padding-left: 5px; padding-bottom: 5px; cursor: pointer;\" onclick=\"window.open('https://wiki.archethic.net/FAQ/bridge/#what-happens-if-a-problem-occurs-or-i-refuse-a-transaction-during-the-transfer');\" />\n      `);\n\n      $(\"#refundButton\").on(\"click\", async () => {\n\n        $(\"#error\").text(\"\").show();\n        $(\"#refundButton\").hide();\n        $(\"#refundButtonSpinner\").show();\n\n        setTimeout(function () {\n\n        }, 2000);\n        refundERC(HTLC_Contract, signer)\n          .then(async tx => {\n\n            localStorage.removeItem(\"transferStep\")\n            localStorage.removeItem(\"pendingTransfer\")\n\n            $(\"#error\").text(\"\").show();\n            $(\"#txRefundTransactionLabel\").html(`${state.sourceChainName} refund: <a href=\"${state.sourceChainExplorer}/tx/${tx.transactionHash}\" target=\"_blank\">${tx.transactionHash}</a>`);\n            $(\"#txRefundTransaction\").show();\n            $(\"#txSummaryRefundFinished\").show();\n            $(\"#txSummary2Timer\").hide();\n            $(\"#refundButtonSpinner\").hide();\n\n            // Update ERC20 amount\n            const { UCOPrice } = await getConfig(ethChainId)\n\n            const account = await state.signer.getAddress()\n            const balance = await state.unirisContract.balanceOf(account);\n            const erc20Amount = ethers.utils.formatUnits(balance, 18);\n\n            $(\"#fromBalanceUCO\").text(new Intl.NumberFormat().format(parseFloat(erc20Amount).toFixed(8)));\n            $(\"#fromBalanceUSD\").text(new Intl.NumberFormat().format((erc20Amount * UCOPrice).toFixed(5)));\n          })\n          .catch(err => {\n            $(\"#refundButton\").show();\n            $(\"#refundButtonSpinner\").hide();\n            $(\"#error\")\n              .text(`${err.message || e}`)\n              .show();\n          })\n      })\n    }\n    else {\n      $(\"#txSummary2Timer\").html(`\n        <img src=\"assets/images/icons/timer.png\" height=\"20\" alt=\"\" style=\"padding-right: 5px; padding-bottom: 5px;\" />\n        As the transfer is not effective, you can retrieve your funds in ${('0' + t.hours).slice(-2) + 'h' + ('0' + t.minutes).slice(-2) + 'm' + ('0' + t.seconds).slice(-2)}.\n        <img src=\"assets/images/icons/help.png\" height=\"20\" alt=\"\" style=\"padding-left: 5px; padding-bottom: 5px; cursor: pointer;\" onclick=\"window.open('https://wiki.archethic.net/FAQ/bridge/#what-happens-if-a-problem-occurs-or-i-refuse-a-transaction-during-the-transfer')\" />\n      `);\n    }\n  }, 1000);\n}\n\nexport function clearLocalStorage() {\n  localStorage.clear();\n}\n\nexport function exportLocalStorage() {\n  var data = {};\n  for (var i = 0; i < localStorage.length; i++) {\n    var key = localStorage.key(i);\n    data[key] = localStorage.getItem(key);\n  }\n  var jsonData = JSON.stringify(data);\n  var blob = new Blob([jsonData], { type: \"application/json\" });\n  var url = URL.createObjectURL(blob);\n  var link = $(\"<a />\")\n    .attr(\"href\", url)\n    .attr(\"download\", \"localStorageData.json\")\n    .appendTo(\"body\");\n  link[0].click();\n  link.remove();\n  URL.revokeObjectURL(url);\n}\n", "import { handleResponse } from \"./utils.js\";\n\nexport function initChainContext(ethChainId) {\n\n    switch (ethChainId) {\n        case 80001:\n            sourceChainLogo = \"Polygon-logo.svg\";\n            fromChainName = \"Polygon\";\n\n            $(\"#fromChain\").text(fromChainName)\n            $(\"#fromNetworkLabel\").text(\"Mumbai Polygon Testnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic Testnet\");\n            break;\n        case 137:\n            sourceChainLogo = \"Polygon-logo.svg\";\n            fromChainName = \"Polygon\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"Polygon Mainnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic\");\n            break;\n        case 97:\n            sourceChainLogo = \"BSC-logo.svg\";\n            fromChainName = \"Binance\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"BSC Testnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic Testnet\");\n            break;\n        case 56:\n            sourceChainLogo = \"BSC-logo.svg\";\n            fromChainName = \"Binance\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"BSC Mainnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic\");\n            break;\n        case 5:\n            sourceChainLogo = \"Ethereum-logo.svg\";\n            fromChainName = \"Ethereum\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"Goerli Ethereum Testnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic Testnet\");\n            break;\n        case 1337:\n            sourceChainLogo = \"Ethereum-logo.svg\";\n            fromChainName = \"Ethereum\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"Ethereum Devnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic Devnet\");\n            break;\n        default:\n            sourceChainLogo = \"Ethereum-logo.svg\";\n            fromChainName = \"Ethereum\";\n\n            $(\"#fromChain\").text(fromChainName);\n            $(\"#fromNetworkLabel\").text(\"Ethereum Mainnet\");\n            $(\"#toNetworkLabel\").text(\"Archethic\");\n            break;\n    }\n    $(\"#sourceChainImg\").attr(\"src\", `assets/images/bc-logos/${sourceChainLogo}`);\n\n    return fromChainName;\n}\n", "import { initPageBridge, initTransfer, changeBtnToTransferInProgress, displayConnectionError, initReConnectionScreen, showConfirmationDialog, showRefundDialog } from \"./ui.js\";\nimport { initChainContext } from \"./chain.js\";\nimport { uint8ArrayToHex, handleError, exportLocalStorage, clearLocalStorage, getTimeRemaining } from \"./utils.js\";\nimport { getERC20Contract, getHTLC_Contract, deployHTLC, transferERC20, deployArchethic, withdrawEthereum, withdrawArchethic, refundERC, getHTLCLockTime } from \"./contract\";\nimport { getArchethicBalance, getConfig } from \"./service.js\";\n\nlet provider;\nlet interval;\n\nwindow.onload = async function () {\n  try {\n    if (typeof window.ethereum !== \"undefined\") {\n      console.log(\"MetaMask is installed!\");\n      // Check if metamask is alredy connected\n      if (localStorage.getItem(\"walletInjected?\")) {\n        provider = new ethers.providers.Web3Provider(window.ethereum);\n        // Already connected, start app\n        $(\"#connectMetamaskBtn\").hide();\n        $(\"#connectMetamaskBtnSpinner\").show();\n        handleNetworkChange()\n        await provider.send(\"eth_requestAccounts\", []);\n        await startApp()\n      }\n    } else {\n      throw \"No ethereum provider is installed\"\n    }\n  } catch (e) {\n    localStorage.setItem(\"walletInjected?\", false)\n    displayConnectionError(e.message || e)\n  }\n};\n\n$(\"#connectMetamaskBtn\").on(\"click\", async () => {\n  provider = new ethers.providers.Web3Provider(window.ethereum);\n  try {\n    $(\"#connectMetamaskBtn\").hide();\n    $(\"#connectMetamaskBtnSpinner\").show();\n    // MetaMask requires requesting permission to connect users accounts\n    await provider.send(\"eth_requestAccounts\", []);\n    localStorage.setItem(\"walletInjected?\", true)\n    handleNetworkChange()\n    await startApp();\n  }\n  catch (e) {\n    displayConnectionError(e.message || e)\n  }\n});\n\n$('#clearLocalStorage').click(function () {\n  showConfirmationDialog(\"WARNING\", \"Are you sure you want to clear the local data about the bridge?<br/><br/>If you have a transfer in progress, it will be lost and cannot be completed or refunded.\", function (result) {\n    if (result) {\n      clearLocalStorage();\n      $(\"#recipientAddress\").val('');\n      $(\"#nbTokensToSwap\").val('');\n      location.reload();\n    }\n  });\n  return false;\n});\n\n\n$('#btnSwap').click(function () {\n  showConfirmationDialog(\"DISCLAIMER\", \"I understand that the transferred UCOs can only be used on the Archethic Public Blockchain and can't be withdrawn or transferred until a two-way bridge is launched.\", function (result) {\n    if (result) {\n      $('#swapForm').submit();\n    }\n  });\n  return false;\n});\n\n\n$('#exportLocalStorage').click(function () {\n  exportLocalStorage();\n});\n\n$('#exportLocalStorageModal').click(function () {\n  exportLocalStorage();\n});\n\n$('#exportLocalStorageModalRefund').click(function () {\n  exportLocalStorage();\n});\n\n$('#refund').click(function () {\n  showRefundDialog(\"Refund\", `Please, fill your ${fromChainName} contract address to refund`, async function (isOk, contractAddress) {\n    if (isOk) {\n      var dots = window.setInterval(function () {\n        var wait = $('#loading-dots');\n        if (wait.html().length > 2)\n          wait.html(\"\");\n        else\n          wait.append(\".\");\n      }, 500);\n\n      var endDate = 0;\n      try {\n        $(\"#errorRefund\").text(\"\")\n        $(\"#refundFinished\").hide();\n        $(\"#infoRefund\").show();\n        $(\"#refundInProgress\").show();\n\n        console.log(\"Refund contract\", contractAddress)\n        const contract = await getHTLC_Contract(contractAddress, provider)\n        endDate = await getHTLCLockTime(contract);\n        console.log('endDate' + endDate);\n        const tx = await refundERC(contract, signer)\n        $(\"#refundInProgress\").hide();\n        $(\"#refundFinished\").show();\n        clearLocalStorage();\n        console.log(\"Refund tx\", tx.transactionHash)\n      }\n      catch (e) {\n        $(\"#refundInProgress\").hide();\n\n        let errorMsg = e\n        if (e.data && e.data.message) {\n          errorMsg = e.data.message\n        } else if (e.message) {\n          errorMsg = e.message\n        }\n        if (errorMsg.includes(\"Response has no error or result for request\")) {\n          $(\"#errorRefund\")\n            .text(`Please, connect to the internet.`)\n            .show();\n        }\n        else {\n          if (errorMsg.includes(\"Too early\")) {\n            var t = getTimeRemaining(endDate);\n            $(\"#errorRefund\")\n              .text(`You can retrieve your funds in ${('0' + t.hours).slice(-2) + 'h' + ('0' + t.minutes).slice(-2) + 'm' + ('0' + t.seconds).slice(-2)}.`)\n              .show();\n          }\n          else {\n            $(\"#errorRefund\")\n              .text(`${errorMsg}`)\n              .show();\n          }\n        }\n\n\n      }\n      clearInterval(dots);\n    }\n  });\n  return false;\n});\n\nfunction handleNetworkChange() {\n  // Handle chain changement\n  provider.provider.on(\"chainChanged\", _chainId => {\n    provider = new ethers.providers.Web3Provider(window.ethereum);\n    initReConnectionScreen()\n    clearInterval(interval)\n    startApp().catch(e => displayConnectionError(e.message || e))\n  })\n}\n\nlet toChainExplorer;\nlet step;\nlet ucoPrice;\nlet signer;\n\nasync function startApp() {\n  const { chainId: ethChainId } = await provider.getNetwork();\n  signer = provider.getSigner();\n\n  let fromChainName = initChainContext(ethChainId);\n\n  const {\n    archethicEndpoint,\n    unirisTokenAddress,\n    recipientEthereum,\n    sufficientFunds,\n    UCOPrice,\n    sourceChainExplorer,\n    bridgeAddress,\n    maxSwapDollar\n  } = await getConfig(ethChainId);\n\n  ucoPrice = UCOPrice\n\n  initPageBridge();\n\n  const maxSwap = (maxSwapDollar / UCOPrice).toFixed(5);\n  $(\"#maxSwap\").text(maxSwapDollar);\n  $(\"#nbTokensToSwap\").attr(\"max\", maxSwap);\n\n  toChainExplorer = `${archethicEndpoint}/explorer/transaction`;\n\n  $(\"#ucoPrice\").text(`1 UCO = ${UCOPrice.toFixed(5)}$`).show();\n  $(\"#swapBalanceUSD\").text(0);\n\n  if (!sufficientFunds) {\n    $(\"#error\").text(\n      \"Bridge has insufficient funds. Please retry later...\"\n    );\n    $(\"#workflow\").show()\n    $(\"#close\").css({ visibility: 'hidden' })\n    return;\n  }\n\n  console.log(\"Archethic endpoint: \", archethicEndpoint);\n\n  const unirisContract = await getERC20Contract(unirisTokenAddress, provider);\n\n  // Display signer account\n  const account = await signer.getAddress();\n  let erc20Amount = await setupEthAccount(account, unirisContract, sourceChainExplorer, ucoPrice, maxSwapDollar)\n\n  // Handle account change\n  provider.provider.on('accountsChanged', async (accounts) => {\n    const account = accounts[0]\n    erc20Amount = await setupEthAccount(account, unirisContract, sourceChainExplorer, ucoPrice, maxSwapDollar)\n  })\n\n  // Update the UCO price\n  interval = setInterval(async () => {\n    const { UCOPrice } = await getConfig(ethChainId)\n    if (UCOPrice != ucoPrice) {\n      $(\"#ucoPrice\").text(`1 UCO = ${UCOPrice.toFixed(5)}$`).show();\n      const maxSwap = (maxSwapDollar / UCOPrice).toFixed(5);\n      $(\"#nbTokensToSwap\").attr(\"max\", maxSwap);\n\n      const erc20Amount = parseFloat($(\"#fromBalanceUCO\").text())\n      const usd = (erc20Amount * UCOPrice).toFixed(5)\n\n      $(\"#fromBalanceUSD\").text(new Intl.NumberFormat(usd));\n      $(\"#maxUCOValue\").attr(\"value\", Math.min(erc20Amount, maxSwap).toFixed(5));\n\n      ucoPrice = UCOPrice\n    }\n  }, 5000)\n\n  $(\"#recipientAddress\").on(\"change\", async (e) => {\n    const archethicBalance = await getArchethicBalance($(e.target).val());\n\n    const ucoAmount = archethicBalance / 1e8\n\n    $(\"#toBalanceUCO\").text(new Intl.NumberFormat().format(parseFloat(ucoAmount).toFixed(8)));\n    $(\"#toBalanceUSD\").text(new Intl.NumberFormat().format((ucoPrice * ucoAmount).toFixed(5)));\n    $('#btnSwap').prop('disabled', false);\n  });\n\n  $(\"#recipientAddress\").focus();\n\n  $(\"#nbTokensToSwap\").on(\"input\", (e) => {\n    const amount = $(e.target).val();\n    $(\"#swapBalanceUSD\").text((amount * ucoPrice).toFixed(5));\n  })\n\n\n  $(\"#maxButton\").on(\"click\", () => {\n    const amount = $(\"#maxUCOValue\").val();\n    $(\"#nbTokensToSwap\").val(amount);\n    $(\"#swapBalanceUSD\").text((amount * ucoPrice).toFixed(5));\n  });\n\n  $(\"#close\").on(\"click\", () => {\n    $(\"#workflow\").hide();\n  });\n\n  $(\"#closeInfoRefund\").on(\"click\", () => {\n    $(\"#infoRefund\").hide();\n  });\n\n  let pendingTransferJSON = localStorage.getItem(\"pendingTransfer\");\n  let state\n  if (pendingTransferJSON) {\n    state = await initState(pendingTransferJSON, ethChainId, unirisContract, toChainExplorer, recipientEthereum, signer)\n  }\n\n  $(\"#swapForm\").on(\"submit\", async (e) => {\n    e.preventDefault();\n    if (!e.target.checkValidity()) {\n      return;\n    }\n\n    $(\"#error\").text(\"\")\n\n    if (state) {\n      changeBtnToTransferInProgress();\n      try {\n        await goto(localStorage.getItem(\"transferStep\"), state);\n      }\n      catch (e) {\n        handleError(e, step, JSON.parse(pendingTransferJSON, ethChainId));\n      }\n      return\n    }\n\n    const recipientAddress = $(\"#recipientAddress\").val();\n    await handleFormSubmit(\n      signer,\n      unirisContract,\n      recipientEthereum,\n      recipientAddress,\n      ethChainId,\n      sourceChainExplorer,\n      bridgeAddress,\n      fromChainName,\n      erc20Amount\n    );\n  });\n\n}\n\nasync function setupEthAccount(account, unirisContract, sourceChainExplorer, ucoPrice, maxSwapDollar) {\n  let accountStr = account\n  if (account.length > 4) {\n    accountStr = account.substring(0, 5) + \"...\" + account.substring(account.length - 3);\n  }\n  $(\"#accountName\").html(`Account<br><a href=\"${sourceChainExplorer}/address/${account}\" target=\"_blank\">${accountStr}</a>`)\n\n  const maxSwap = (maxSwapDollar / ucoPrice).toFixed(5);\n\n  const erc20Amount = await setERC20Amount(account, unirisContract, ucoPrice)\n  $(\"#maxUCOValue\").attr(\"value\", Math.min(erc20Amount, maxSwap).toFixed(5));\n  return erc20Amount;\n}\n\nasync function setERC20Amount(account, unirisContract, ucoPrice) {\n  const balance = await unirisContract.balanceOf(account);\n  const erc20Amount = ethers.utils.formatUnits(balance, 18);\n  $(\"#fromBalanceUCO\").text(new Intl.NumberFormat().format(parseFloat(erc20Amount).toFixed(8)));\n  $(\"#fromBalanceUSD\").text(new Intl.NumberFormat().format((erc20Amount * ucoPrice).toFixed(5)));\n  return erc20Amount\n}\n\nasync function handleFormSubmit(\n  signer,\n  unirisContract,\n  recipientEthereum,\n  recipientArchethic,\n  ethChainId,\n  sourceChainExplorer,\n  bridgeAddress,\n  fromChainName,\n  erc20Amount\n) {\n\n  initTransfer();\n\n  step = 0;\n\n  const amount = $(\"#nbTokensToSwap\").val();\n  //console.log(erc20Amount)\n  //console.log(amount)\n  //console.log(erc20Amount < amount)\n\n\n  if (erc20Amount * 1e18 < amount * 1e18) {\n    $(\"#btnSwapSpinner\").hide();\n    $(\"#btnSwap\").show();\n    $(\"#btnSwap\").prop(\"disabled\", false);\n\n    $(\"#error\").text(`Insufficient UCO on ${fromChainName}`);\n    $(\"#close\").show();\n    return\n  }\n\n  const bridgeBalance = await getArchethicBalance(bridgeAddress)\n  if (bridgeBalance <= amount * 1e8) {\n    $(\"#error\").text(\n      \"Bridge has insuffficient funds. Please retry later...\"\n    );\n    $(\"#close\").show();\n    return;\n  }\n\n  $(\"#steps\").show();\n\n  const secret = new Uint8Array(32);\n  crypto.getRandomValues(secret);\n\n  const secretHex = uint8ArrayToHex(secret);\n\n  let secretDigest = await crypto.subtle.digest(\"SHA-256\", secret);\n  secretDigest = new Uint8Array(secretDigest);\n\n  const secretDigestHex = uint8ArrayToHex(secretDigest);\n\n  $(\"#ethDeploymentStep\").addClass(\"is-active\");\n  step = 1;\n\n  try {\n    const { contract: HTLC_Contract, transaction: HTLC_tx } = await deployHTLC(\n      recipientEthereum,\n      unirisContract.address,\n      amount,\n      secretDigest,\n      signer,\n      7200 // 2 hours of locktime\n    );\n    localStorage.setItem(\"pendingTransfer\", JSON.stringify({\n      HTLC_Address: HTLC_Contract.address,\n      secretHex: secretHex,\n      secretDigestHex: secretDigestHex,\n      amount: amount,\n      recipientArchethic: recipientArchethic,\n      HTLC_transaction: HTLC_tx,\n      sourceChainName: fromChainName,\n      sourceChainExplorer: sourceChainExplorer\n    }))\n    localStorage.setItem(\"transferStep\", \"deployedEthContract\")\n\n    $(\"#ethDeploymentStep\").removeClass(\"is-active\");\n\n    $(\"#txSummary1Label\").html(`Contract address on ${fromChainName}: <a href=\"${sourceChainExplorer}/address/${HTLC_Contract.address}\" target=\"_blank\">${HTLC_Contract.address}</a>`)\n    $(\"#txSummary1\").show();\n\n    let state = {\n      HTLC_Contract: HTLC_Contract,\n      secretHex: secretHex,\n      secretDigestHex: secretDigestHex,\n      amount: amount,\n      ethChainId: ethChainId,\n      recipientEthereum: recipientEthereum,\n      recipientArchethic: recipientArchethic,\n      unirisContract: unirisContract,\n      signer: signer,\n      sourceChainExplorer: sourceChainExplorer,\n      toChainExplorer: toChainExplorer,\n      HTLC_transaction: HTLC_tx,\n      sourceChainName: fromChainName\n    }\n    await goto(\"deployedEthContract\", state)\n\n  } catch (e) {\n    let pendingTransferJSON = localStorage.getItem(\"pendingTransfer\");\n    let state = JSON.parse(pendingTransferJSON)\n    handleError(e, step, state, ethChainId)\n  }\n}\n\nasync function goto(step, state) {\n  switch (step) {\n    case \"deployedEthContract\":\n      step = 2\n      state = await transferERC20(state)\n      setERC20Amount(await state.signer.getAddress(), state.unirisContract, ucoPrice)\n      return await goto(\"transferedERC20\", state)\n    case \"transferedERC20\":\n      step = 3\n      state = await deployArchethic(state)\n      return await goto(\"deployedArchethicContract\", state)\n    case \"deployedArchethicContract\":\n      step = 4\n      $(\"#swapStep\").addClass(\"is-active\");\n      state = await withdrawEthereum(state)\n      return await goto(\"withdrawEthContract\", state)\n    case \"withdrawEthContract\":\n      await withdrawArchethic(state)\n\n      $(\"#swapStep\").removeClass(\"is-active\");\n      $(\"#btnSwapSpinner\").hide()\n      $('#btnSwap').prop('disabled', false);\n      $('#btnSwap').show()\n      $('#nbTokensToSwap').prop('disabled', false);\n      $('#recipientAddress').prop('disabled', false);\n      $(\"#close\").show();\n\n      console.log(\"Token swap finish\");\n      localStorage.removeItem(\"transferStep\")\n      localStorage.removeItem(\"pendingTransfer\")\n      $(\"#recipientAddress\").prop('disabled', false)\n      $(\"#nbTokensToSwap\").prop('disabled', false)\n\n      setERC20Amount(await state.signer.getAddress(), state.unirisContract, ucoPrice)\n\n      setTimeout(async () => {\n        const archethicBalance = await getArchethicBalance(state.recipientArchethic);\n\n        const newUCOBalance = archethicBalance / 1e8\n\n        $(\"#toBalanceUCO\").text(parseFloat(newUCOBalance).toFixed(2));\n        $(\"#toBalanceUSD\").text((ucoPrice * newUCOBalance).toFixed(5));\n\n      }, 2000)\n      break\n  }\n}\n\nasync function initState(pendingTransferJSON, ethChainId, unirisContract, toChainExplorer, recipientEthereum, signer) {\n\n  $(\"#btnSwapSpinnerText\").text(\"Loading previous transfer\");\n  $(\"#btnSwapSpinner\").show();\n  $(\"#btnSwap\").hide();\n\n  const pendingTransfer = JSON.parse(pendingTransferJSON);\n  const state = {\n    HTLC_Contract: await getHTLC_Contract(pendingTransfer.HTLC_Address, provider),\n    HTLC_transaction: pendingTransfer.HTLC_transaction,\n    secretHex: pendingTransfer.secretHex,\n    secretDigestHex: pendingTransfer.secretDigestHex,\n    amount: pendingTransfer.amount,\n    ethChainId: ethChainId,\n    recipientEthereum: recipientEthereum,\n    recipientArchethic: pendingTransfer.recipientArchethic,\n    unirisContract: unirisContract,\n    signer: signer,\n    erc20transferAddress: pendingTransfer.erc20transferAddress,\n    archethicContractAddress: pendingTransfer.archethicContractAddress,\n    withdrawEthereumAddress: pendingTransfer.withdrawEthereumAddress,\n    sourceChainExplorer: pendingTransfer.sourceChainExplorer,\n    toChainExplorer: toChainExplorer,\n    sourceChainName: pendingTransfer.sourceChainName\n  }\n\n  $(\"#recipientAddress\").val(pendingTransfer.recipientArchethic);\n  $(\"#recipientAddress\").prop('disabled', true)\n  $(\"#nbTokensToSwap\").val(pendingTransfer.amount);\n  $(\"#nbTokensToSwap\").prop('disabled', true)\n\n  const archethicBalance = await getArchethicBalance(pendingTransfer.recipientArchethic);\n\n  const ucoAmount = archethicBalance / 1e8\n\n  $(\"#toBalanceUCO\").text(new Intl.NumberFormat().format(parseFloat(ucoAmount).toFixed(8)));\n  $(\"#toBalanceUSD\").text(new Intl.NumberFormat().format((ucoPrice * ucoAmount).toFixed(5)));\n  $(\"#swapBalanceUSD\").text((pendingTransfer.amount * ucoPrice).toFixed(5));\n\n  $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\");\n  $(\"#txSummary1Label\").html(`Contract address on ${pendingTransfer.sourceChainName}: <a href=\"${pendingTransfer.sourceChainExplorer}/address/${pendingTransfer.HTLC_Address}\" target=\"_blank\">${pendingTransfer.HTLC_Address}</a>`)\n  $(\"#txSummary1\").show();\n  $(\"#ethTransferStep\").addClass(\"is-active\");\n\n  step = 2\n\n  if (pendingTransfer.erc20transferAddress) {\n    step = 3\n    $(\"#txSummary2Label\").html(`Provision UCOs: <a href=\"${pendingTransfer.sourceChainExplorer}/tx/${pendingTransfer.erc20transferAddress}\" target=\"_blank\">${pendingTransfer.erc20transferAddress}</a>`)\n    $(\"#txSummary2\").show();\n  }\n\n  if (pendingTransfer.archethicContractAddress) {\n    step = 4\n    $(\"#txSummary3Label\").html(`Contract address on Archethic: <a href=\"${toChainExplorer}/${pendingTransfer.archethicContractAddress}\" target=\"_blank\">${pendingTransfer.archethicContractAddress}</a>`)\n    $(\"#txSummary3\").show();\n  }\n\n  if (pendingTransfer.withdrawEthereumAddress) {\n    $(\"#txSummary4Label\").html(`${fromChainName} swap: <a href=\"${pendingTransfer.sourceChainExplorer}/tx/${pendingTransfer.withdrawEthereumAddress}\" target=\"_blank\">${pendingTransfer.withdrawEthereumAddress}</a>`)\n    $(\"#txSummary4\").show();\n  }\n\n  $(\"#btnSwapSpinner\").hide();\n  $(\"#btnSwap\").show();\n  $(\"#btnSwap\").prop(\"disabled\", false);\n\n  // Reset error steps\n  switch (step) {\n    case 2:\n      $(\"#ethTransferStep\").addClass(\"is-active\");\n      $(\"#ethTransferStep\").removeClass(\"is-failed\");\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\");\n      break;\n    case 3:\n      $(\"#archethicDeploymentStep\").addClass(\"is-active\");\n      $(\"#archethicDeploymentStep\").removeClass(\"is-failed\");\n      $(\"#ethDeploymentStep\").removeClass(\"is-failed is-active\");\n      $(\"#ethTransferStep\").removeClass(\"is-failed is-active\");\n      break;\n    case 4:\n      $(\"#swapStep\").addClass(\"is-active\");\n      $(\"#swapStep\").removeClass(\"is-failed\");\n      $(\"#archethicDeploymentStep\").removeClass(\"is-active is-failed\");\n      $(\"#ethTransferStep\").removeClass(\"is-active is-failed\");\n      $(\"#ethDeploymentStep\").removeClass(\"is-active is-failed\");\n      break;\n    default:\n      break;\n  }\n\n  $(\"#steps\").show();\n  changeBtnToTransferInProgress()\n  try {\n    await goto(localStorage.getItem(\"transferStep\"), state);\n  }\n  catch (e) {\n    handleError(e, step, JSON.parse(pendingTransferJSON, ethChainId));\n  }\n\n  return state\n}\n"],
  "mappings": "MACO,SAASA,GAAiB,CAC/B,EAAE,OAAO,EAAE,KAAK,EAChB,EAAE,WAAW,EAAE,KAAK,EAEpB,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAK,EAC3C,EAAE,mBAAmB,EAAE,KAAK,WAAY,EAAK,EAE7CC,EAAc,EAEd,EAAE,QAAQ,EAAE,KAAK,EAAE,EAEnB,EAAE,UAAU,EAAE,KAAK,WAAY,EAAI,EACnC,EAAE,UAAU,EAAE,KAAK,UAAU,EAC7B,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,qBAAqB,EAAE,KAAK,EAE9B,EAAE,aAAa,EAAE,KAAK,EAEtBC,EAAgB,CAClB,CAEO,SAASC,GAAyB,CACvC,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAAE,KAAK,EACpC,EAAE,qBAAqB,EAAE,KAAK,EAC9B,EAAE,4BAA4B,EAAE,KAAK,EACrC,EAAE,WAAW,EAAE,KAAK,EACpB,EAAE,OAAO,EAAE,KAAK,CAClB,CAEO,SAASC,EAAuBC,EAAO,CAC5C,EAAE,4BAA4B,EAAE,KAAK,EACrC,EAAE,qBAAqB,EAAE,KAAK,EAC9B,EAAE,kBAAkB,EAAE,KAAKA,CAAK,EAAE,KAAK,CACzC,CAEO,SAASC,GAAe,CAC7BL,EAAc,EACdM,EAA8B,EAC9B,EAAE,QAAQ,EAAE,KAAK,EACjBL,EAAgB,EAChB,EAAE,QAAQ,EAAE,KAAK,EAAE,CAErB,CAEO,SAASK,GAAgC,CAC9C,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAI,EAC1C,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,qBAAqB,EAAE,KAAK,EAC9B,EAAE,WAAW,EAAE,KAAK,EACpB,EAAE,QAAQ,EAAE,KAAK,CACnB,CAEA,SAASN,GAAgB,CACvB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAC3B,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAAE,EAC7B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,oBAAoB,EAAE,KAAK,EAC7B,EAAE,0BAA0B,EAAE,KAAK,EACnC,EAAE,2BAA2B,EAAE,KAAK,EAAE,EACtC,EAAE,sBAAsB,EAAE,KAAK,CACjC,CAEA,SAASC,GAAkB,CAEzB,EAAE,oBAAoB,EAAE,YAAY,WAAW,EAC/C,EAAE,oBAAoB,EAAE,YAAY,WAAW,EAC/C,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAC7C,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAC7C,EAAE,0BAA0B,EAAE,YAAY,WAAW,EACrD,EAAE,0BAA0B,EAAE,YAAY,WAAW,EACrD,EAAE,WAAW,EAAE,YAAY,WAAW,EACtC,EAAE,WAAW,EAAE,YAAY,WAAW,CACxC,CAEO,SAASM,EAAuBC,EAAOC,EAASC,EAAU,CAC/D,IAAIC,EAAS,EAAE,aAAa,EAAE,KAAKF,CAAO,EACvC,OAAO,CACN,MAAOD,EACP,UAAW,GACX,MAAO,GACP,QAAS,CACP,GAAM,UAAY,CAChBE,EAAS,EAAK,EACd,EAAE,IAAI,EAAE,OAAO,OAAO,CACxB,EACA,IAAO,UAAY,CACjBA,EAAS,EAAI,EACb,EAAE,IAAI,EAAE,OAAO,OAAO,CACxB,CACF,EACA,KAAM,SAAUE,EAAOC,EAAI,CACzB,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,QACT,cAAe,OACf,YAAa,OACb,OAAU,OACV,gBAAiB,OACjB,iBAAkB,WACpB,CAAC,EACD,EAAE,YAAY,EAAE,IAAI,CAClB,gBAAiB,MACnB,CAAC,EACD,EAAE,qBAAqB,EAAE,IAAI,CAC3B,WAAc,cACd,MAAS,QACT,cAAe,OACf,YAAa,OACb,OAAU,OACV,gBAAiB,gBACjB,iBAAkB,WACpB,CAAC,EACD,EAAE,oBAAoB,EAAE,IAAI,CAC1B,WAAc,SAEhB,CAAC,EACD,EAAE,+BAA+B,EAAE,IAAI,CACrC,WAAc,aAChB,CAAC,EACD,EAAE,8DAA8D,EAAE,IAAI,CACpE,WAAc,aAChB,CAAC,EACD,EAAE,uBAAuB,EAAE,IAAI,CAC7B,WAAc,aAChB,CAAC,EACD,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,yCAAyC,EAAE,IAAI,CACnE,eAAgB,MAClB,CAAC,EACD,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,6BAA6B,EAAE,MACnD,UAAY,CACV,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,SACX,CAAC,CACH,EAAG,UAAY,CACb,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,OACX,CAAC,CACH,CACF,EACA,EAAE,8BAA8B,EAAE,IAAI,CACpC,WAAc,cACd,MAAS,QACT,cAAe,OACf,cAAe,MACf,YAAa,OACb,OAAU,OACV,gBAAiB,OACjB,iBAAkB,WACpB,CAAC,CACH,CACF,CAAC,CACL,CAGO,SAASC,EAAiBN,EAAOC,EAASC,EAAU,CACzD,IAAIK,EAAQ,EAAE,SAAS,EAAE,KAAK,CAC5B,KAAQ,OACR,KAAQ,IACV,CAAC,EACGJ,EAAS,EAAE,OAAO,EAAE,KAAKF,CAAO,EAAE,OAAO,YAAY,EAAE,OAAOM,CAAK,EACpE,OAAO,CACN,MAAOP,EACP,UAAW,GACX,MAAO,GACP,QAAS,CACP,OAAU,UAAY,CACpBE,EAAS,EAAK,EACd,EAAE,IAAI,EAAE,OAAO,OAAO,CACxB,EACA,SAAY,UAAY,CACtB,IAAIM,EAAkBD,EAAM,IAAI,EAC5BE,GAAoBD,CAAe,GACrCN,EAAS,GAAMM,CAAe,EAC9B,EAAE,IAAI,EAAE,OAAO,OAAO,GAEtB,MAAM,oCAAoC,CAE9C,CACF,EACA,KAAM,SAAUJ,EAAOC,EAAI,CACzBE,EAAM,IAAI,CACR,gBAAiB,OACjB,cAAe,OACf,cAAe,MACf,YAAa,OACb,cAAe,OACf,MAAS,UACT,OAAU,OACV,WAAc,UACd,QAAW,OACX,iBAAkB,WACpB,CAAC,EACD,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,QACT,cAAe,OACf,YAAa,OACb,OAAU,OACV,gBAAiB,OACjB,iBAAkB,WACpB,CAAC,EACD,EAAE,YAAY,EAAE,IAAI,CAClB,MAAS,QACT,gBAAiB,MACnB,CAAC,EACD,EAAE,qBAAqB,EAAE,IAAI,CAC3B,WAAc,cACd,MAAS,QACT,cAAe,OACf,YAAa,OACb,OAAU,OACV,gBAAiB,gBACjB,iBAAkB,WACpB,CAAC,EACD,EAAE,oBAAoB,EAAE,IAAI,CAC1B,WAAc,SAEhB,CAAC,EACD,EAAE,+BAA+B,EAAE,IAAI,CACrC,WAAc,aAChB,CAAC,EACD,EAAE,8DAA8D,EAAE,IAAI,CACpE,WAAc,aAChB,CAAC,EACD,EAAE,uBAAuB,EAAE,IAAI,CAC7B,WAAc,aAChB,CAAC,EACD,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,yCAAyC,EAAE,IAAI,CACnE,eAAgB,MAClB,CAAC,EACD,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,6BAA6B,EAAE,MACnD,UAAY,CACV,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,SACX,CAAC,CACH,EAAG,UAAY,CACb,EAAE,IAAI,EAAE,IAAI,CACV,MAAS,OACX,CAAC,CACH,CACF,EACA,EAAE,8BAA8B,EAAE,IAAI,CACpC,WAAc,cACd,MAAS,QACT,cAAe,OACf,cAAe,MACf,YAAa,OACb,OAAU,OACV,gBAAiB,OACjB,iBAAkB,WACpB,CAAC,CACH,CACF,CAAC,CACL,CAEA,SAASE,GAAoBC,EAAS,CAEpC,OAAO,OAAO,MAAM,UAAUA,CAAO,CACvC,CC5QA,eAAsBC,EAAiBC,EAAoBC,EAAU,CACnE,IAAMC,EAAiB,MAAMC,GAAkB,EAC/C,OAAO,IAAI,OAAO,SAASH,EAAoBE,EAAgBD,CAAQ,CACzE,CAEA,eAAsBG,EAAiBC,EAAcJ,EAAU,CAC7D,GAAM,CAAE,IAAKK,CAAQ,EAAI,MAAMC,GAAQ,EACvC,OAAO,IAAI,OAAO,SAASF,EAAcC,EAASL,CAAQ,CAC5D,CAEA,eAAsBO,EACpBC,EACAT,EACAU,EACAC,EACAC,EACAC,EACA,CACA,GAAM,CAAE,IAAKP,EAAS,SAAUQ,CAAa,EAAI,MAAMP,GAAQ,EAGzDQ,EAAW,MAFD,IAAI,OAAO,gBAAgBT,EAASQ,EAAcF,CAAM,EAEzC,OAC7BH,EACAT,EACA,OAAO,MAAM,WAAWU,EAAQ,EAAE,EAClCC,EACAE,EACA,CAAE,SAAU,GAAQ,CACtB,EAEMG,EAAK,MAAMD,EAAS,kBAAkB,KAAK,EACjD,eAAQ,IAAI,6BAA+BA,EAAS,OAAO,EAEpD,CAAE,SAAUA,EAAU,YAAaC,CAAG,CAC/C,CAEA,eAAeC,GACbP,EACAQ,EACAC,EACAP,EACA,CAQA,OAAO,MALI,MAFcO,EAAe,QAAQP,CAAM,EAEpB,SAChCM,EACA,OAAO,MAAM,WAAWR,EAAQ,EAAE,CACpC,GAEgB,KAAK,CACvB,CAGA,eAAsBU,EAAcC,EAAO,CACzC,GAAM,CAAE,cAAAC,EAAe,OAAAZ,EAAQ,eAAAS,EAAgB,OAAAP,EAAQ,oBAAAW,CAAoB,EAAIF,EAE/E,EAAE,kBAAkB,EAAE,SAAS,WAAW,EAC1C,IAAMG,EAAkB,MAAMP,GAAqBP,EAAQY,EAAc,QAASH,EAAgBP,CAAM,EACxG,aAAa,QAAQ,eAAgB,iBAAiB,EAGtD,IAAMa,EAAsB,aAAa,QAAQ,iBAAiB,EAC9DC,EAAkB,KAAK,MAAMD,CAAmB,EACpD,OAAAC,EAAgB,qBAAuBF,EAAgB,gBACvD,aAAa,QAAQ,kBAAmB,KAAK,UAAUE,CAAe,CAAC,EAEvE,QAAQ,IAAI,GAAGhB,kBAAuB,EAEtC,EAAE,kBAAkB,EAAE,KAAK,4BAA4Ba,QAA0BC,EAAgB,oCAAoCA,EAAgB,qBAAqB,EAC1K,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAE7CH,EAAM,qBAAuBG,EAAgB,gBACtCH,CACT,CAEA,eAAsBM,EAAgBN,EAAO,CAC3C,GAAM,CAAE,cAAAC,EAAe,OAAAZ,EAAQ,gBAAAkB,EAAiB,mBAAAC,EAAoB,WAAAC,EAAY,gBAAAC,EAAiB,iBAAAC,CAAiB,EAAIX,EAEtH,EAAE,0BAA0B,EAAE,SAAS,WAAW,EAClD,KAAO,EAEP,IAAMY,EAAkB,MAAMC,GAC5BN,EACAC,EACAnB,EACAY,EAAc,QACdU,EAAiB,gBACjBF,CACF,EACA,aAAa,QAAQ,eAAgB,2BAA2B,EAGhE,IAAML,EAAsB,aAAa,QAAQ,iBAAiB,EAC9DC,EAAkB,KAAK,MAAMD,CAAmB,EACpD,OAAAC,EAAgB,yBAA2BO,EAC3C,aAAa,QAAQ,kBAAmB,KAAK,UAAUP,CAAe,CAAC,EAEvE,QAAQ,IAAI,gCAAiCO,CAAe,EAC5D,EAAE,kBAAkB,EAAE,KAAK,2CAA2CF,KAAmBE,sBAAoCA,OAAqB,EAClJ,EAAE,aAAa,EAAE,KAAK,EAEtB,EAAE,0BAA0B,EAAE,YAAY,WAAW,EAErDZ,EAAM,yBAA2BY,EAC1BZ,CACT,CAGA,eAAsBc,EAAiBd,EAAO,CAC5C,GAAM,CAAE,cAAAC,EAAe,OAAAV,EAAQ,UAAAwB,EAAW,eAAAjB,EAAgB,SAAAkB,EAAU,oBAAAd,CAAoB,EAAIF,EAEtFiB,EAAa,MAAMC,GAAmBjB,EAAeV,EAAQwB,CAAS,EAC5E,aAAa,QAAQ,eAAgB,qBAAqB,EAG1D,IAAMX,EAAsB,aAAa,QAAQ,iBAAiB,EAC9DC,EAAkB,KAAK,MAAMD,CAAmB,EACpDC,EAAgB,wBAA0BY,EAAW,gBACrD,aAAa,QAAQ,kBAAmB,KAAK,UAAUZ,CAAe,CAAC,EAEvE,QAAQ,IAAI,qCAAqCY,EAAW,iBAAiB,EAC7E,EAAE,kBAAkB,EAAE,KAAK,GAAG,gCAAgCf,QAA0Be,EAAW,oCAAoCA,EAAW,qBAAqB,EACvK,EAAE,aAAa,EAAE,KAAK,EAEtB,IAAME,EAAa,MAAM5B,EAAO,WAAW,EACrC6B,EAAe,MAAMtB,EAAe,UAAUqB,CAAU,EACxDE,EAAc,OAAO,MAAM,YAAYD,EAAc,EAAE,EAC7D,EAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,OAAO,WAAWC,CAAW,EAAE,QAAQ,CAAC,CAAC,CAAC,EAC5F,IAAIC,EAAU,GAAKN,EACnB,SAAE,cAAc,EAAE,KAAK,KAAK,IAAIK,EAAcL,EAAUM,CAAO,EAAE,QAAQ,CAAC,CAAC,EAC3E,EAAE,iBAAiB,EAAE,MAAMD,EAAcL,GAAU,QAAQ,CAAC,CAAC,EAE7DhB,EAAM,wBAA0BiB,EAAW,gBACpCjB,CACT,CAEA,eAAsBuB,GAAkB,CAAE,yBAAAC,EAA0B,cAAAvB,EAAe,wBAAAwB,EAAyB,UAAAV,EAAW,WAAAN,EAAY,gBAAAC,CAAgB,EAAG,CACpJ,QAAQ,IAAIc,CAAwB,EACpC,GAAM,CAAE,6BAAAE,EAA8B,6BAAAC,CAA6B,EAAI,MAAMC,GAC3EJ,EACAvB,EAAc,QACdwB,EACAV,EACAN,CACF,EACA,aAAa,QAAQ,eAAgB,2BAA2B,EAEhE,QAAQ,IAAI,oCAAoCiB,GAA8B,EAC9E,QAAQ,IAAI,oCAAoCC,GAA8B,EAC9E,EAAE,kBAAkB,EAAE,KAAK,4BAA4BjB,KAAmBgB,sBAAiDA,OAAkC,EAC7J,EAAE,aAAa,EAAE,KAAK,EAEtB,EAAE,kBAAkB,EAAE,KAAK,gCAAgChB,KAAmBiB,sBAAiDA,OAAkC,EACjK,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,KAAK,EAC3B,EAAE,oBAAoB,EAAE,KAAK,CAE/B,CAGA,eAAed,GACbN,EACAsB,EACAxC,EACAyC,EACAC,EACAtB,EACA,CACA,OAAO,MAAM,uBAAwB,CACnC,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,CACnB,WAAYF,EACZ,iBAAkBsB,EAClB,OAAQxC,EAAS,IACjB,wBAAyByC,EACzB,4BAAAC,EACA,gBAAiBtB,CACnB,CAAC,CACH,CAAC,EACE,KAAKuB,CAAc,EACnB,KAAM,GAAM,EAAE,eAAe,CAClC,CAEA,eAAed,GAAmBjB,EAAeV,EAAQ0C,EAAQ,CAC/D,IAAMC,EAAsB,MAAMjC,EAAc,QAAQV,CAAM,EAE9D,GAAI,CAEF,aAAM2C,EAAoB,UAAU,EAE7B,MADI,MAAMA,EAAoB,SAAS,KAAKD,IAAU,CAAE,SAAU,GAAQ,CAAC,GAClE,KAAK,CACvB,OACOE,EAAP,CACE,cAAQ,IAAIA,CAAC,EACPA,CACR,CAEF,CAEA,eAAeP,GACbJ,EACAM,EACAM,EACAH,EACAxB,EACA,CACA,OAAO,MAAM,iBAAkB,CAC7B,OAAQ,OACR,QAAS,CACP,OAAQ,mBACR,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,CACnB,yBAA0Be,EAC1B,wBAAyBM,EACzB,4BAA6BM,EAC7B,OAAQH,EACR,gBAAiBxB,CACnB,CAAC,CACH,CAAC,EAAE,KAAKuB,CAAc,EACnB,KAAKK,GAAK,CACT,GAAM,CAAE,6BAAAX,EAA8B,6BAAAC,CAA6B,EAAIU,EACvE,MAAO,CAAE,6BAAAX,EAA8B,6BAAAC,CAA6B,CACtE,CAAC,CACL,CAEA,eAAe7C,IAAoB,CAEjC,OAAO,MADG,MAAM,MAAM,cAAc,GACrB,KAAK,CACtB,CAEA,eAAeI,IAAU,CAEvB,IAAMoD,EAAM,MADF,MAAM,MAAM,WAAW,GACb,KAAK,EACzB,MAAO,CACL,IAAKA,EAAI,IACT,SAAUA,EAAI,QAChB,CACF,CAEA,eAAsBC,EAAgBtC,EAAe,CACnD,IAAMuC,EAAY,MAAMvC,EAAc,UAAU,EAC1CT,EAAW,MAAMS,EAAc,SAAS,EACxCwC,EAAiBD,EAAU,SAAS,EAAIhD,EAAS,SAAS,EAChE,OAAO,IAAI,KAAKiD,EAAiB,GAAI,CACvC,CAEA,eAAsBC,EAAUzC,EAAeV,EAAQ,CACrD,IAAM2C,EAAsB,MAAMjC,EAAc,QAAQV,CAAM,EAE9D,GADmB,MAAM2C,EAAoB,SAAS,EAEpD,KAAM,8DAIR,OAAO,MADI,MAAMA,EAAoB,OAAO,GAC5B,KAAK,CACvB,CCtQA,eAAsBS,EAAoBC,EAAS,CAC/C,OAAO,MAAM,uBAAuBA,GAAS,EACxC,KAAKC,CAAc,EACnB,KAAMC,GACIA,EAAE,OACZ,CACT,CAEA,eAAsBC,EAAUC,EAAY,CAExC,OAAO,MAAM,UAAW,CACpB,OAAQ,OACR,QAAS,CACL,eAAgB,mBAChB,OAAQ,kBACZ,EACA,KAAM,KAAK,UAAU,CACjB,gBAAiBA,CACrB,CAAC,CACL,CAAC,EACI,KAAKH,CAAc,EACnB,KAAMC,GAAM,CACT,GAAIA,EAAE,QAAU,KACZ,MAAMA,EAAE,OAGZ,MAAO,CACH,kBAAmBA,EAAE,kBACrB,mBAAoBA,EAAE,mBACtB,kBAAmBA,EAAE,kBACrB,gBAAiBA,EAAE,gBACnB,SAAUA,EAAE,SACZ,oBAAqBA,EAAE,oBACvB,cAAeA,EAAE,cACjB,cAAeA,EAAE,aACrB,CACJ,CAAC,CACT,CCpCA,eAAsBG,EAAeC,EAAU,CAC7C,OAAO,IAAI,QAAQ,SAAUC,EAASC,EAAQ,CACxCF,EAAS,QAAU,KAAOA,EAAS,QAAU,IAC/CA,EAAS,KAAK,EAAE,KAAKC,CAAO,EAE5BD,EACG,KAAK,EACL,KAAKE,CAAM,EACX,MAAM,IAAMA,EAAOF,EAAS,UAAU,CAAC,CAE9C,CAAC,CACH,CAEA,IAAMG,GAAY,CAAC,EACnB,QAASC,EAAI,EAAGA,GAAK,IAAM,EAAEA,EAAG,CAC9B,IAAMC,EAAWD,EAAE,SAAS,EAAE,EAAE,SAAS,EAAG,GAAG,EAC/CD,GAAU,KAAKE,CAAQ,CACzB,CAEO,SAASC,EAAgBC,EAAO,CACrC,IAAMC,EAAO,IAAI,WAAWD,CAAK,EAC3BE,EAAY,IAAI,MAAMD,EAAK,MAAM,EAEvC,QAASE,EAAI,EAAGA,EAAIF,EAAK,OAAQ,EAAEE,EACjCD,EAAUC,GAAKP,GAAUK,EAAKE,IAGhC,OAAOD,EAAU,KAAK,EAAE,CAC1B,CAGA,eAAsBE,EAAYC,EAAGC,EAAMC,EAAOC,EAAY,CAC5D,EAAE,UAAU,EAAE,KAAK,WAAY,EAAK,EACpC,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAK,EAC3C,EAAE,mBAAmB,EAAE,KAAK,WAAY,EAAK,EAC7C,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,iBAAiB,EAAE,KAAK,EAE1B,QAAQ,IAAIH,CAAC,EACb,IAAII,EAAWJ,EAcf,OAbIA,EAAE,MAAQA,EAAE,KAAK,QACnBI,EAAWJ,EAAE,KAAK,QAEXA,EAAE,UACTI,EAAWJ,EAAE,SAGf,QAAQ,MAAMI,CAAQ,EACtB,EAAE,QAAQ,EACP,KAAK,GAAGA,GAAU,EAClB,KAAK,EACR,EAAE,QAAQ,EAAE,KAAK,EAETH,EAAM,CACZ,IAAK,GACH,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAC7C,EAAE,kBAAkB,EAAE,SAAS,WAAW,EAC1C,EAAE,0BAA0B,EAAE,SAAS,WAAW,EAClD,EAAE,WAAW,EAAE,SAAS,WAAW,EACnC,MACF,IAAK,GACH,EAAE,kBAAkB,EAAE,SAAS,WAAW,EAC1C,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAC7C,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,MACF,IAAK,GACH,EAAE,0BAA0B,EAAE,SAAS,WAAW,EAClD,EAAE,0BAA0B,EAAE,YAAY,WAAW,EACrD,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,EAAE,kBAAkB,EAAE,YAAY,qBAAqB,EACvD,MACF,IAAK,GACH,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,EAAE,kBAAkB,EAAE,YAAY,qBAAqB,EACvD,EAAE,0BAA0B,EAAE,YAAY,qBAAqB,EAC/D,EAAE,WAAW,EAAE,SAAS,WAAW,EACnC,EAAE,WAAW,EAAE,YAAY,WAAW,EACtC,MACF,QACE,KACJ,CAGA,GADA,QAAQ,IAAIC,CAAK,EACbA,GAASA,EAAM,qBAAsB,CACvC,IAAMG,EAAW,IAAI,OAAO,UAAU,aAAa,OAAO,QAAQ,EAC5DC,EAASD,EAAS,UAAU,EAE5BE,EAAgB,MAAMC,EAAiBN,EAAM,aAAcG,CAAQ,EACnEI,EAAU,MAAMC,EAAgBH,CAAa,EACnDI,GAAYF,EAASF,EAAeD,EAAQJ,EAAOC,CAAU,EAC7D,EAAE,kBAAkB,EAAE,KAAK,CAC7B,CACF,CAEO,SAASS,EAAiBC,EAAS,CACxC,IAAIC,EAAI,KAAK,MAAMD,CAAO,EAAI,KAAK,MAAM,IAAI,IAAM,EAC/CE,EAAU,KAAK,MAAOD,EAAI,IAAQ,EAAE,EACpCE,EAAU,KAAK,MAAOF,EAAI,IAAO,GAAM,EAAE,EACzCG,EAAQ,KAAK,MAAOH,GAAK,IAAO,GAAK,IAAO,EAAE,EAClD,MAAO,CACL,MAASA,EACT,MAASG,EACT,QAAWD,EACX,QAAWD,CACb,CACF,CAEO,SAASJ,GAAYE,EAASN,EAAeD,EAAQJ,EAAOC,EAAY,CAC7E,IAAIe,EAAe,YAAY,UAAY,CACzC,IAAIJ,EAAIF,EAAiBC,CAAO,EAC5BC,EAAE,OAAS,GACb,cAAcI,CAAY,EAC1B,EAAE,kBAAkB,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAS1B,EAED,EAAE,eAAe,EAAE,GAAG,QAAS,SAAY,CAEzC,EAAE,QAAQ,EAAE,KAAK,EAAE,EAAE,KAAK,EAC1B,EAAE,eAAe,EAAE,KAAK,EACxB,EAAE,sBAAsB,EAAE,KAAK,EAE/B,WAAW,UAAY,CAEvB,EAAG,GAAI,EACPC,EAAUZ,EAAeD,CAAM,EAC5B,KAAK,MAAMc,GAAM,CAEhB,aAAa,WAAW,cAAc,EACtC,aAAa,WAAW,iBAAiB,EAEzC,EAAE,QAAQ,EAAE,KAAK,EAAE,EAAE,KAAK,EAC1B,EAAE,2BAA2B,EAAE,KAAK,GAAGlB,EAAM,oCAAoCA,EAAM,0BAA0BkB,EAAG,oCAAoCA,EAAG,qBAAqB,EAChL,EAAE,sBAAsB,EAAE,KAAK,EAC/B,EAAE,0BAA0B,EAAE,KAAK,EACnC,EAAE,kBAAkB,EAAE,KAAK,EAC3B,EAAE,sBAAsB,EAAE,KAAK,EAG/B,GAAM,CAAE,SAAAC,CAAS,EAAI,MAAMC,EAAUnB,CAAU,EAEzCoB,EAAU,MAAMrB,EAAM,OAAO,WAAW,EACxCsB,EAAU,MAAMtB,EAAM,eAAe,UAAUqB,CAAO,EACtDE,EAAc,OAAO,MAAM,YAAYD,EAAS,EAAE,EAExD,EAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,OAAO,WAAWC,CAAW,EAAE,QAAQ,CAAC,CAAC,CAAC,EAC5F,EAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,QAAQA,EAAcJ,GAAU,QAAQ,CAAC,CAAC,CAAC,CAC/F,CAAC,EACA,MAAMK,GAAO,CACZ,EAAE,eAAe,EAAE,KAAK,EACxB,EAAE,sBAAsB,EAAE,KAAK,EAC/B,EAAE,QAAQ,EACP,KAAK,GAAGA,EAAI,SAAW,GAAG,EAC1B,KAAK,CACV,CAAC,CACL,CAAC,GAGD,EAAE,kBAAkB,EAAE,KAAK;AAAA;AAAA,4EAE2C,IAAMZ,EAAE,OAAO,MAAM,EAAE,EAAI,KAAO,IAAMA,EAAE,SAAS,MAAM,EAAE,EAAI,KAAO,IAAMA,EAAE,SAAS,MAAM,EAAE;AAAA;AAAA,OAEpK,CAEL,EAAG,GAAI,CACT,CAEO,SAASa,GAAoB,CAClC,aAAa,MAAM,CACrB,CAEO,SAASC,GAAqB,CAEnC,QADIC,EAAO,CAAC,EACH/B,EAAI,EAAGA,EAAI,aAAa,OAAQA,IAAK,CAC5C,IAAIgC,EAAM,aAAa,IAAIhC,CAAC,EAC5B+B,EAAKC,GAAO,aAAa,QAAQA,CAAG,CACtC,CACA,IAAIC,EAAW,KAAK,UAAUF,CAAI,EAC9BG,EAAO,IAAI,KAAK,CAACD,CAAQ,EAAG,CAAE,KAAM,kBAAmB,CAAC,EACxDE,EAAM,IAAI,gBAAgBD,CAAI,EAC9BE,EAAO,EAAE,OAAO,EACjB,KAAK,OAAQD,CAAG,EAChB,KAAK,WAAY,uBAAuB,EACxC,SAAS,MAAM,EAClBC,EAAK,GAAG,MAAM,EACdA,EAAK,OAAO,EACZ,IAAI,gBAAgBD,CAAG,CACzB,CCpMO,SAASE,GAAiBC,EAAY,CAEzC,OAAQA,EAAY,CAChB,IAAK,OACD,gBAAkB,mBAClB,cAAgB,UAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,wBAAwB,EACpD,EAAE,iBAAiB,EAAE,KAAK,mBAAmB,EAC7C,MACJ,IAAK,KACD,gBAAkB,mBAClB,cAAgB,UAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,iBAAiB,EAC7C,EAAE,iBAAiB,EAAE,KAAK,WAAW,EACrC,MACJ,IAAK,IACD,gBAAkB,eAClB,cAAgB,UAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,aAAa,EACzC,EAAE,iBAAiB,EAAE,KAAK,mBAAmB,EAC7C,MACJ,IAAK,IACD,gBAAkB,eAClB,cAAgB,UAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,aAAa,EACzC,EAAE,iBAAiB,EAAE,KAAK,WAAW,EACrC,MACJ,IAAK,GACD,gBAAkB,oBAClB,cAAgB,WAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,yBAAyB,EACrD,EAAE,iBAAiB,EAAE,KAAK,mBAAmB,EAC7C,MACJ,IAAK,MACD,gBAAkB,oBAClB,cAAgB,WAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,iBAAiB,EAC7C,EAAE,iBAAiB,EAAE,KAAK,kBAAkB,EAC5C,MACJ,QACI,gBAAkB,oBAClB,cAAgB,WAEhB,EAAE,YAAY,EAAE,KAAK,aAAa,EAClC,EAAE,mBAAmB,EAAE,KAAK,kBAAkB,EAC9C,EAAE,iBAAiB,EAAE,KAAK,WAAW,EACrC,KACR,CACA,SAAE,iBAAiB,EAAE,KAAK,MAAO,0BAA0B,iBAAiB,EAErE,aACX,CC3DA,IAAIC,EACAC,GAEJ,OAAO,OAAS,gBAAkB,CAChC,GAAI,CACF,GAAI,OAAO,OAAO,SAAa,IAC7B,QAAQ,IAAI,wBAAwB,EAEhC,aAAa,QAAQ,iBAAiB,IACxCD,EAAW,IAAI,OAAO,UAAU,aAAa,OAAO,QAAQ,EAE5D,EAAE,qBAAqB,EAAE,KAAK,EAC9B,EAAE,4BAA4B,EAAE,KAAK,EACrCE,GAAoB,EACpB,MAAMF,EAAS,KAAK,sBAAuB,CAAC,CAAC,EAC7C,MAAMG,EAAS,OAGjB,MAAM,mCAEV,OAASC,EAAP,CACA,aAAa,QAAQ,kBAAmB,EAAK,EAC7CC,EAAuBD,EAAE,SAAWA,CAAC,CACvC,CACF,EAEA,EAAE,qBAAqB,EAAE,GAAG,QAAS,SAAY,CAC/CJ,EAAW,IAAI,OAAO,UAAU,aAAa,OAAO,QAAQ,EAC5D,GAAI,CACF,EAAE,qBAAqB,EAAE,KAAK,EAC9B,EAAE,4BAA4B,EAAE,KAAK,EAErC,MAAMA,EAAS,KAAK,sBAAuB,CAAC,CAAC,EAC7C,aAAa,QAAQ,kBAAmB,EAAI,EAC5CE,GAAoB,EACpB,MAAMC,EAAS,CACjB,OACOC,EAAP,CACEC,EAAuBD,EAAE,SAAWA,CAAC,CACvC,CACF,CAAC,EAED,EAAE,oBAAoB,EAAE,MAAM,UAAY,CACxC,OAAAE,EAAuB,UAAW,oKAAqK,SAAUC,EAAQ,CACnNA,IACFC,EAAkB,EAClB,EAAE,mBAAmB,EAAE,IAAI,EAAE,EAC7B,EAAE,iBAAiB,EAAE,IAAI,EAAE,EAC3B,SAAS,OAAO,EAEpB,CAAC,EACM,EACT,CAAC,EAGD,EAAE,UAAU,EAAE,MAAM,UAAY,CAC9B,OAAAF,EAAuB,aAAc,uKAAwK,SAAUC,EAAQ,CACzNA,GACF,EAAE,WAAW,EAAE,OAAO,CAE1B,CAAC,EACM,EACT,CAAC,EAGD,EAAE,qBAAqB,EAAE,MAAM,UAAY,CACzCE,EAAmB,CACrB,CAAC,EAED,EAAE,0BAA0B,EAAE,MAAM,UAAY,CAC9CA,EAAmB,CACrB,CAAC,EAED,EAAE,gCAAgC,EAAE,MAAM,UAAY,CACpDA,EAAmB,CACrB,CAAC,EAED,EAAE,SAAS,EAAE,MAAM,UAAY,CAC7B,OAAAC,EAAiB,SAAU,qBAAqB,2CAA4C,eAAgBC,EAAMC,EAAiB,CACjI,GAAID,EAAM,CACR,IAAIE,EAAO,OAAO,YAAY,UAAY,CACxC,IAAIC,EAAO,EAAE,eAAe,EACxBA,EAAK,KAAK,EAAE,OAAS,EACvBA,EAAK,KAAK,EAAE,EAEZA,EAAK,OAAO,GAAG,CACnB,EAAG,GAAG,EAEFC,EAAU,EACd,GAAI,CACF,EAAE,cAAc,EAAE,KAAK,EAAE,EACzB,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,mBAAmB,EAAE,KAAK,EAE5B,QAAQ,IAAI,kBAAmBH,CAAe,EAC9C,IAAMI,EAAW,MAAMC,EAAiBL,EAAiBZ,CAAQ,EACjEe,EAAU,MAAMG,EAAgBF,CAAQ,EACxC,QAAQ,IAAI,UAAYD,CAAO,EAC/B,IAAMI,EAAK,MAAMC,EAAUJ,EAAUK,CAAM,EAC3C,EAAE,mBAAmB,EAAE,KAAK,EAC5B,EAAE,iBAAiB,EAAE,KAAK,EAC1Bb,EAAkB,EAClB,QAAQ,IAAI,YAAaW,EAAG,eAAe,CAC7C,OACOf,EAAP,CACE,EAAE,mBAAmB,EAAE,KAAK,EAE5B,IAAIkB,EAAWlB,EAMf,GALIA,EAAE,MAAQA,EAAE,KAAK,QACnBkB,EAAWlB,EAAE,KAAK,QACTA,EAAE,UACXkB,EAAWlB,EAAE,SAEXkB,EAAS,SAAS,6CAA6C,EACjE,EAAE,cAAc,EACb,KAAK,kCAAkC,EACvC,KAAK,UAGJA,EAAS,SAAS,WAAW,EAAG,CAClC,IAAIC,EAAIC,EAAiBT,CAAO,EAChC,EAAE,cAAc,EACb,KAAK,mCAAmC,IAAMQ,EAAE,OAAO,MAAM,EAAE,EAAI,KAAO,IAAMA,EAAE,SAAS,MAAM,EAAE,EAAI,KAAO,IAAMA,EAAE,SAAS,MAAM,EAAE,IAAI,EAC3I,KAAK,CACV,MAEE,EAAE,cAAc,EACb,KAAK,GAAGD,GAAU,EAClB,KAAK,CAKd,CACA,cAAcT,CAAI,CACpB,CACF,CAAC,EACM,EACT,CAAC,EAED,SAASX,IAAsB,CAE7BF,EAAS,SAAS,GAAG,eAAgByB,GAAY,CAC/CzB,EAAW,IAAI,OAAO,UAAU,aAAa,OAAO,QAAQ,EAC5D0B,EAAuB,EACvB,cAAczB,EAAQ,EACtBE,EAAS,EAAE,MAAMC,GAAKC,EAAuBD,EAAE,SAAWA,CAAC,CAAC,CAC9D,CAAC,CACH,CAEA,IAAIuB,EACAC,EACAC,EACAR,EAEJ,eAAelB,GAAW,CACxB,GAAM,CAAE,QAAS2B,CAAW,EAAI,MAAM9B,EAAS,WAAW,EAC1DqB,EAASrB,EAAS,UAAU,EAE5B,IAAI+B,EAAgBC,GAAiBF,CAAU,EAEzC,CACJ,kBAAAG,EACA,mBAAAC,EACA,kBAAAC,EACA,gBAAAC,EACA,SAAAC,EACA,oBAAAC,EACA,cAAAC,EACA,cAAAC,CACF,EAAI,MAAMC,EAAUX,CAAU,EAE9BD,EAAWQ,EAEXK,EAAe,EAEf,IAAMC,GAAWH,EAAgBH,GAAU,QAAQ,CAAC,EASpD,GARA,EAAE,UAAU,EAAE,KAAKG,CAAa,EAChC,EAAE,iBAAiB,EAAE,KAAK,MAAOG,CAAO,EAExChB,EAAkB,GAAGM,yBAErB,EAAE,WAAW,EAAE,KAAK,WAAWI,EAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAC5D,EAAE,iBAAiB,EAAE,KAAK,CAAC,EAEvB,CAACD,EAAiB,CACpB,EAAE,QAAQ,EAAE,KACV,sDACF,EACA,EAAE,WAAW,EAAE,KAAK,EACpB,EAAE,QAAQ,EAAE,IAAI,CAAE,WAAY,QAAS,CAAC,EACxC,MACF,CAEA,QAAQ,IAAI,uBAAwBH,CAAiB,EAErD,IAAMW,EAAiB,MAAMC,EAAiBX,EAAoBlC,CAAQ,EAGpE8C,EAAU,MAAMzB,EAAO,WAAW,EACpC0B,EAAc,MAAMC,GAAgBF,EAASF,EAAgBN,EAAqBT,EAAUW,CAAa,EAG7GxC,EAAS,SAAS,GAAG,kBAAmB,MAAOiD,GAAa,CAC1D,IAAMH,EAAUG,EAAS,GACzBF,EAAc,MAAMC,GAAgBF,EAASF,EAAgBN,EAAqBT,EAAUW,CAAa,CAC3G,CAAC,EAGDvC,GAAW,YAAY,SAAY,CACjC,GAAM,CAAE,SAAAoC,CAAS,EAAI,MAAMI,EAAUX,CAAU,EAC/C,GAAIO,GAAYR,EAAU,CACxB,EAAE,WAAW,EAAE,KAAK,WAAWQ,EAAS,QAAQ,CAAC,IAAI,EAAE,KAAK,EAC5D,IAAMM,GAAWH,EAAgBH,GAAU,QAAQ,CAAC,EACpD,EAAE,iBAAiB,EAAE,KAAK,MAAOM,CAAO,EAExC,IAAMI,EAAc,WAAW,EAAE,iBAAiB,EAAE,KAAK,CAAC,EACpDG,IAAOH,EAAcV,GAAU,QAAQ,CAAC,EAE9C,EAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAaa,EAAG,CAAC,EACpD,EAAE,cAAc,EAAE,KAAK,QAAS,KAAK,IAAIH,EAAaJ,CAAO,EAAE,QAAQ,CAAC,CAAC,EAEzEd,EAAWQ,CACb,CACF,EAAG,GAAI,EAEP,EAAE,mBAAmB,EAAE,GAAG,SAAU,MAAOjC,GAAM,CAG/C,IAAM+C,EAFmB,MAAMC,EAAoB,EAAEhD,EAAE,MAAM,EAAE,IAAI,CAAC,EAE/B,IAErC,EAAE,eAAe,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,OAAO,WAAW+C,CAAS,EAAE,QAAQ,CAAC,CAAC,CAAC,EACxF,EAAE,eAAe,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,QAAQtB,EAAWsB,GAAW,QAAQ,CAAC,CAAC,CAAC,EACzF,EAAE,UAAU,EAAE,KAAK,WAAY,EAAK,CACtC,CAAC,EAED,EAAE,mBAAmB,EAAE,MAAM,EAE7B,EAAE,iBAAiB,EAAE,GAAG,QAAU/C,GAAM,CACtC,IAAMiD,EAAS,EAAEjD,EAAE,MAAM,EAAE,IAAI,EAC/B,EAAE,iBAAiB,EAAE,MAAMiD,EAASxB,GAAU,QAAQ,CAAC,CAAC,CAC1D,CAAC,EAGD,EAAE,YAAY,EAAE,GAAG,QAAS,IAAM,CAChC,IAAMwB,EAAS,EAAE,cAAc,EAAE,IAAI,EACrC,EAAE,iBAAiB,EAAE,IAAIA,CAAM,EAC/B,EAAE,iBAAiB,EAAE,MAAMA,EAASxB,GAAU,QAAQ,CAAC,CAAC,CAC1D,CAAC,EAED,EAAE,QAAQ,EAAE,GAAG,QAAS,IAAM,CAC5B,EAAE,WAAW,EAAE,KAAK,CACtB,CAAC,EAED,EAAE,kBAAkB,EAAE,GAAG,QAAS,IAAM,CACtC,EAAE,aAAa,EAAE,KAAK,CACxB,CAAC,EAED,IAAIyB,EAAsB,aAAa,QAAQ,iBAAiB,EAC5DC,EACAD,IACFC,EAAQ,MAAMC,GAAUF,EAAqBxB,EAAYc,EAAgBjB,EAAiBQ,EAAmBd,CAAM,GAGrH,EAAE,WAAW,EAAE,GAAG,SAAU,MAAOjB,GAAM,CAEvC,GADAA,EAAE,eAAe,EACb,CAACA,EAAE,OAAO,cAAc,EAC1B,OAKF,GAFA,EAAE,QAAQ,EAAE,KAAK,EAAE,EAEfmD,EAAO,CACTE,EAA8B,EAC9B,GAAI,CACF,MAAMC,EAAK,aAAa,QAAQ,cAAc,EAAGH,CAAK,CACxD,OACOnD,EAAP,CACEuD,EAAYvD,EAAGwB,EAAM,KAAK,MAAM0B,EAAqBxB,CAAU,CAAC,CAClE,CACA,MACF,CAEA,IAAM8B,EAAmB,EAAE,mBAAmB,EAAE,IAAI,EACpD,MAAMC,GACJxC,EACAuB,EACAT,EACAyB,EACA9B,EACAQ,EACAC,EACAR,EACAgB,CACF,CACF,CAAC,CAEH,CAEA,eAAeC,GAAgBF,EAASF,EAAgBN,EAAqBT,EAAUW,EAAe,CACpG,IAAIsB,EAAahB,EACbA,EAAQ,OAAS,IACnBgB,EAAahB,EAAQ,UAAU,EAAG,CAAC,EAAI,MAAQA,EAAQ,UAAUA,EAAQ,OAAS,CAAC,GAErF,EAAE,cAAc,EAAE,KAAK,uBAAuBR,aAA+BQ,sBAA4BgB,OAAgB,EAEzH,IAAMnB,GAAWH,EAAgBX,GAAU,QAAQ,CAAC,EAE9CkB,EAAc,MAAMgB,EAAejB,EAASF,EAAgBf,CAAQ,EAC1E,SAAE,cAAc,EAAE,KAAK,QAAS,KAAK,IAAIkB,EAAaJ,CAAO,EAAE,QAAQ,CAAC,CAAC,EAClEI,CACT,CAEA,eAAegB,EAAejB,EAASF,EAAgBf,EAAU,CAC/D,IAAMmC,EAAU,MAAMpB,EAAe,UAAUE,CAAO,EAChDC,EAAc,OAAO,MAAM,YAAYiB,EAAS,EAAE,EACxD,SAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,OAAO,WAAWjB,CAAW,EAAE,QAAQ,CAAC,CAAC,CAAC,EAC5F,EAAE,iBAAiB,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,QAAQA,EAAclB,GAAU,QAAQ,CAAC,CAAC,CAAC,EACtFkB,CACT,CAEA,eAAec,GACbxC,EACAuB,EACAT,EACA8B,EACAnC,EACAQ,EACAC,EACAR,EACAgB,EACA,CAEAmB,EAAa,EAEbtC,EAAO,EAEP,IAAMyB,EAAS,EAAE,iBAAiB,EAAE,IAAI,EAMxC,GAAIN,EAAc,KAAOM,EAAS,KAAM,CACtC,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,UAAU,EAAE,KAAK,WAAY,EAAK,EAEpC,EAAE,QAAQ,EAAE,KAAK,uBAAuBtB,GAAe,EACvD,EAAE,QAAQ,EAAE,KAAK,EACjB,MACF,CAGA,GADsB,MAAMqB,EAAoBb,CAAa,GACxCc,EAAS,IAAK,CACjC,EAAE,QAAQ,EAAE,KACV,uDACF,EACA,EAAE,QAAQ,EAAE,KAAK,EACjB,MACF,CAEA,EAAE,QAAQ,EAAE,KAAK,EAEjB,IAAMc,EAAS,IAAI,WAAW,EAAE,EAChC,OAAO,gBAAgBA,CAAM,EAE7B,IAAMC,EAAYC,EAAgBF,CAAM,EAEpCG,EAAe,MAAM,OAAO,OAAO,OAAO,UAAWH,CAAM,EAC/DG,EAAe,IAAI,WAAWA,CAAY,EAE1C,IAAMC,EAAkBF,EAAgBC,CAAY,EAEpD,EAAE,oBAAoB,EAAE,SAAS,WAAW,EAC5C1C,EAAO,EAEP,GAAI,CACF,GAAM,CAAE,SAAU4C,EAAe,YAAaC,CAAQ,EAAI,MAAMC,EAC9DvC,EACAS,EAAe,QACfS,EACAiB,EACAjD,EACA,IACF,EACA,aAAa,QAAQ,kBAAmB,KAAK,UAAU,CACrD,aAAcmD,EAAc,QAC5B,UAAWJ,EACX,gBAAiBG,EACjB,OAAQlB,EACR,mBAAoBY,EACpB,iBAAkBQ,EAClB,gBAAiB1C,EACjB,oBAAqBO,CACvB,CAAC,CAAC,EACF,aAAa,QAAQ,eAAgB,qBAAqB,EAE1D,EAAE,oBAAoB,EAAE,YAAY,WAAW,EAE/C,EAAE,kBAAkB,EAAE,KAAK,uBAAuBP,eAA2BO,aAA+BkC,EAAc,4BAA4BA,EAAc,aAAa,EACjL,EAAE,aAAa,EAAE,KAAK,EAiBtB,MAAMd,EAAK,sBAfC,CACV,cAAec,EACf,UAAWJ,EACX,gBAAiBG,EACjB,OAAQlB,EACR,WAAYvB,EACZ,kBAAmBK,EACnB,mBAAoB8B,EACpB,eAAgBrB,EAChB,OAAQvB,EACR,oBAAqBiB,EACrB,gBAAiBX,EACjB,iBAAkB8C,EAClB,gBAAiB1C,CACnB,CACuC,CAEzC,OAAS3B,EAAP,CACA,IAAIkD,EAAsB,aAAa,QAAQ,iBAAiB,EAC5DC,EAAQ,KAAK,MAAMD,CAAmB,EAC1CK,EAAYvD,EAAGwB,EAAM2B,EAAOzB,CAAU,CACxC,CACF,CAEA,eAAe4B,EAAK9B,EAAM2B,EAAO,CAC/B,OAAQ3B,EAAM,CACZ,IAAK,sBACH,OAAAA,EAAO,EACP2B,EAAQ,MAAMoB,EAAcpB,CAAK,EACjCQ,EAAe,MAAMR,EAAM,OAAO,WAAW,EAAGA,EAAM,eAAgB1B,CAAQ,EACvE,MAAM6B,EAAK,kBAAmBH,CAAK,EAC5C,IAAK,kBACH,OAAA3B,EAAO,EACP2B,EAAQ,MAAMqB,EAAgBrB,CAAK,EAC5B,MAAMG,EAAK,4BAA6BH,CAAK,EACtD,IAAK,4BACH,OAAA3B,EAAO,EACP,EAAE,WAAW,EAAE,SAAS,WAAW,EACnC2B,EAAQ,MAAMsB,EAAiBtB,CAAK,EAC7B,MAAMG,EAAK,sBAAuBH,CAAK,EAChD,IAAK,sBACH,MAAMuB,GAAkBvB,CAAK,EAE7B,EAAE,WAAW,EAAE,YAAY,WAAW,EACtC,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,UAAU,EAAE,KAAK,WAAY,EAAK,EACpC,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAK,EAC3C,EAAE,mBAAmB,EAAE,KAAK,WAAY,EAAK,EAC7C,EAAE,QAAQ,EAAE,KAAK,EAEjB,QAAQ,IAAI,mBAAmB,EAC/B,aAAa,WAAW,cAAc,EACtC,aAAa,WAAW,iBAAiB,EACzC,EAAE,mBAAmB,EAAE,KAAK,WAAY,EAAK,EAC7C,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAK,EAE3CQ,EAAe,MAAMR,EAAM,OAAO,WAAW,EAAGA,EAAM,eAAgB1B,CAAQ,EAE9E,WAAW,SAAY,CAGrB,IAAMkD,EAFmB,MAAM3B,EAAoBG,EAAM,kBAAkB,EAElC,IAEzC,EAAE,eAAe,EAAE,KAAK,WAAWwB,CAAa,EAAE,QAAQ,CAAC,CAAC,EAC5D,EAAE,eAAe,EAAE,MAAMlD,EAAWkD,GAAe,QAAQ,CAAC,CAAC,CAE/D,EAAG,GAAI,EACP,KACJ,CACF,CAEA,eAAevB,GAAUF,EAAqBxB,EAAYc,EAAgBjB,EAAiBQ,EAAmBd,EAAQ,CAEpH,EAAE,qBAAqB,EAAE,KAAK,2BAA2B,EACzD,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,UAAU,EAAE,KAAK,EAEnB,IAAM2D,EAAkB,KAAK,MAAM1B,CAAmB,EAChDC,EAAQ,CACZ,cAAe,MAAMtC,EAAiB+D,EAAgB,aAAchF,CAAQ,EAC5E,iBAAkBgF,EAAgB,iBAClC,UAAWA,EAAgB,UAC3B,gBAAiBA,EAAgB,gBACjC,OAAQA,EAAgB,OACxB,WAAYlD,EACZ,kBAAmBK,EACnB,mBAAoB6C,EAAgB,mBACpC,eAAgBpC,EAChB,OAAQvB,EACR,qBAAsB2D,EAAgB,qBACtC,yBAA0BA,EAAgB,yBAC1C,wBAAyBA,EAAgB,wBACzC,oBAAqBA,EAAgB,oBACrC,gBAAiBrD,EACjB,gBAAiBqD,EAAgB,eACnC,EAEA,EAAE,mBAAmB,EAAE,IAAIA,EAAgB,kBAAkB,EAC7D,EAAE,mBAAmB,EAAE,KAAK,WAAY,EAAI,EAC5C,EAAE,iBAAiB,EAAE,IAAIA,EAAgB,MAAM,EAC/C,EAAE,iBAAiB,EAAE,KAAK,WAAY,EAAI,EAI1C,IAAM7B,EAFmB,MAAMC,EAAoB4B,EAAgB,kBAAkB,EAEhD,IAmCrC,OAjCA,EAAE,eAAe,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,OAAO,WAAW7B,CAAS,EAAE,QAAQ,CAAC,CAAC,CAAC,EACxF,EAAE,eAAe,EAAE,KAAK,IAAI,KAAK,aAAa,EAAE,QAAQtB,EAAWsB,GAAW,QAAQ,CAAC,CAAC,CAAC,EACzF,EAAE,iBAAiB,EAAE,MAAM6B,EAAgB,OAASnD,GAAU,QAAQ,CAAC,CAAC,EAExE,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,EAAE,kBAAkB,EAAE,KAAK,uBAAuBmD,EAAgB,6BAA6BA,EAAgB,+BAA+BA,EAAgB,iCAAiCA,EAAgB,kBAAkB,EACjO,EAAE,aAAa,EAAE,KAAK,EACtB,EAAE,kBAAkB,EAAE,SAAS,WAAW,EAE1CpD,EAAO,EAEHoD,EAAgB,uBAClBpD,EAAO,EACP,EAAE,kBAAkB,EAAE,KAAK,4BAA4BoD,EAAgB,0BAA0BA,EAAgB,yCAAyCA,EAAgB,0BAA0B,EACpM,EAAE,aAAa,EAAE,KAAK,GAGpBA,EAAgB,2BAClBpD,EAAO,EACP,EAAE,kBAAkB,EAAE,KAAK,2CAA2CD,KAAmBqD,EAAgB,6CAA6CA,EAAgB,8BAA8B,EACpM,EAAE,aAAa,EAAE,KAAK,GAGpBA,EAAgB,0BAClB,EAAE,kBAAkB,EAAE,KAAK,GAAG,gCAAgCA,EAAgB,0BAA0BA,EAAgB,4CAA4CA,EAAgB,6BAA6B,EACjN,EAAE,aAAa,EAAE,KAAK,GAGxB,EAAE,iBAAiB,EAAE,KAAK,EAC1B,EAAE,UAAU,EAAE,KAAK,EACnB,EAAE,UAAU,EAAE,KAAK,WAAY,EAAK,EAG5BpD,EAAM,CACZ,IAAK,GACH,EAAE,kBAAkB,EAAE,SAAS,WAAW,EAC1C,EAAE,kBAAkB,EAAE,YAAY,WAAW,EAC7C,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,MACF,IAAK,GACH,EAAE,0BAA0B,EAAE,SAAS,WAAW,EAClD,EAAE,0BAA0B,EAAE,YAAY,WAAW,EACrD,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,EAAE,kBAAkB,EAAE,YAAY,qBAAqB,EACvD,MACF,IAAK,GACH,EAAE,WAAW,EAAE,SAAS,WAAW,EACnC,EAAE,WAAW,EAAE,YAAY,WAAW,EACtC,EAAE,0BAA0B,EAAE,YAAY,qBAAqB,EAC/D,EAAE,kBAAkB,EAAE,YAAY,qBAAqB,EACvD,EAAE,oBAAoB,EAAE,YAAY,qBAAqB,EACzD,MACF,QACE,KACJ,CAEA,EAAE,QAAQ,EAAE,KAAK,EACjB6B,EAA8B,EAC9B,GAAI,CACF,MAAMC,EAAK,aAAa,QAAQ,cAAc,EAAGH,CAAK,CACxD,OACOnD,EAAP,CACEuD,EAAYvD,EAAGwB,EAAM,KAAK,MAAM0B,EAAqBxB,CAAU,CAAC,CAClE,CAEA,OAAOyB,CACT",
  "names": ["initPageBridge", "initTxSummary", "initProgressBar", "initReConnectionScreen", "displayConnectionError", "error", "initTransfer", "changeBtnToTransferInProgress", "showConfirmationDialog", "title", "message", "callback", "dialog", "event", "ui", "showRefundDialog", "input", "contractAddress", "isValidERC20Address", "address", "getERC20Contract", "unirisTokenAddress", "provider", "unirisTokenABI", "getUnirisTokenABI", "getHTLC_Contract", "HTLC_Address", "HTLCABI", "getHTLC", "deployHTLC", "recipientEthereum", "amount", "hash", "signer", "lockTime", "HTLCByteCode", "contract", "tx", "transferTokensToHTLC", "HTLCAddress", "unirisContract", "transferERC20", "state", "HTLC_Contract", "sourceChainExplorer", "transferTokenTx", "pendingTransferJSON", "pendingTransfer", "deployArchethic", "secretDigestHex", "recipientArchethic", "ethChainId", "toChainExplorer", "HTLC_transaction", "contractAddress", "sendDeployRequest", "withdrawEthereum", "secretHex", "UCOPrice", "withdrawTx", "withdrawERC20Token", "ethAccount", "erc20Balance", "erc20Amount", "maxSwap", "withdrawArchethic", "archethicContractAddress", "withdrawEthereumAddress", "archethicWithdrawTransaction", "archethicTransferTransaction", "sendWithdrawRequest", "recipientAddress", "ethereumContractAddress", "ethereumContractTransaction", "handleResponse", "secret", "HTLC_ContractSigner", "e", "ethereumWithdrawTransaction", "r", "r_1", "getHTLCLockTime", "startTime", "timestampInSec", "refundERC", "getArchethicBalance", "address", "handleResponse", "r", "getConfig", "ethChainId", "handleResponse", "response", "resolve", "reject", "byteToHex", "n", "hexOctet", "uint8ArrayToHex", "bytes", "buff", "hexOctets", "i", "handleError", "e", "step", "state", "ethChainId", "errorMsg", "provider", "signer", "HTLC_Contract", "getHTLC_Contract", "endDate", "getHTLCLockTime", "updateClock", "getTimeRemaining", "endtime", "t", "seconds", "minutes", "hours", "timeinterval", "refundERC", "tx", "UCOPrice", "getConfig", "account", "balance", "erc20Amount", "err", "clearLocalStorage", "exportLocalStorage", "data", "key", "jsonData", "blob", "url", "link", "initChainContext", "ethChainId", "provider", "interval", "handleNetworkChange", "startApp", "e", "displayConnectionError", "showConfirmationDialog", "result", "clearLocalStorage", "exportLocalStorage", "showRefundDialog", "isOk", "contractAddress", "dots", "wait", "endDate", "contract", "getHTLC_Contract", "getHTLCLockTime", "tx", "refundERC", "signer", "errorMsg", "t", "getTimeRemaining", "_chainId", "initReConnectionScreen", "toChainExplorer", "step", "ucoPrice", "ethChainId", "fromChainName", "initChainContext", "archethicEndpoint", "unirisTokenAddress", "recipientEthereum", "sufficientFunds", "UCOPrice", "sourceChainExplorer", "bridgeAddress", "maxSwapDollar", "getConfig", "initPageBridge", "maxSwap", "unirisContract", "getERC20Contract", "account", "erc20Amount", "setupEthAccount", "accounts", "usd", "ucoAmount", "getArchethicBalance", "amount", "pendingTransferJSON", "state", "initState", "changeBtnToTransferInProgress", "goto", "handleError", "recipientAddress", "handleFormSubmit", "accountStr", "setERC20Amount", "balance", "recipientArchethic", "initTransfer", "secret", "secretHex", "uint8ArrayToHex", "secretDigest", "secretDigestHex", "HTLC_Contract", "HTLC_tx", "deployHTLC", "transferERC20", "deployArchethic", "withdrawEthereum", "withdrawArchethic", "newUCOBalance", "pendingTransfer"]
}
